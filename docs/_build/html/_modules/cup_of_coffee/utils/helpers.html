
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>cup_of_coffee.utils.helpers &#8212; Cup of Coffee 0.1 documentation</title>
    
  <!-- Loaded before other Sphinx assets -->
  <link href="../../../_static/styles/theme.css?digest=1999514e3f237ded88cf" rel="stylesheet">
<link href="../../../_static/styles/pydata-sphinx-theme.css?digest=1999514e3f237ded88cf" rel="stylesheet">

    
  <link rel="stylesheet"
    href="../../../_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../../../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../../../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    <link rel="stylesheet" type="text/css" href="../../../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/css\custom.css" />
    
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../../../_static/scripts/pydata-sphinx-theme.js?digest=1999514e3f237ded88cf">

    <script data-url_root="../../../" id="documentation_options" src="../../../_static/documentation_options.js"></script>
    <script src="../../../_static/jquery.js"></script>
    <script src="../../../_static/underscore.js"></script>
    <script src="../../../_static/doctools.js"></script>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="None">
    

    <!-- Google Analytics -->
    
<script async="" src="https://www.google-analytics.com/analytics.js"></script>
<script>
                        window.ga = window.ga || function () {
                            (ga.q = ga.q || []).push(arguments) };
                        ga.l = +new Date;
                        ga('create', 'UA-XXXXXXX', 'auto');
                        ga('set', 'anonymizeIp', true);
                        ga('send', 'pageview');
                    </script>

  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="60">
    
    <div class="container-fluid" id="banner"></div>

    
    <nav class="navbar navbar-light navbar-expand-lg bg-light fixed-top bd-navbar" id="navbar-main"><div class="container-xl">

  <div id="navbar-start">
    
    

<a class="navbar-brand" href="../../../index.html">
  <img src="../../../_static/logo.png" class="logo" alt="logo">
</a>


    
  </div>

  <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-collapsible" aria-controls="navbar-collapsible" aria-expanded="false" aria-label="Toggle navigation">
    <span class="navbar-toggler-icon"></span>
  </button>

  
  <div id="navbar-collapsible" class="col-lg-9 collapse navbar-collapse">
    <div id="navbar-center" class="mr-auto">
      
      <div class="navbar-center-item">
        <ul id="navbar-main-elements" class="navbar-nav">
    <li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="../../../source/user_guide.html">
  User Guide
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="../../../source/index.html">
  Documentation
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="../../../source/examples/example.html">
  Examples
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="../../../source/contribute.html">
  Contribute
 </a>
</li>

    
</ul>
      </div>
      
    </div>

    <div id="navbar-end">
      
      <div class="navbar-end-item">
        <ul id="navbar-icon-links" class="navbar-nav" aria-label="Icon Links">
        <li class="nav-item">
          <a class="nav-link" href="https://github.com/<your-org>/<your-repo>" rel="noopener" target="_blank" title="GitHub"><span><i class="fab fa-github-square"></i></span>
            <label class="sr-only">GitHub</label></a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="https://gitlab.com/<your-org>/<your-repo>" rel="noopener" target="_blank" title="GitLab"><span><i class="fab fa-gitlab"></i></span>
            <label class="sr-only">GitLab</label></a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="https://twitter.com/<your-handle>" rel="noopener" target="_blank" title="Twitter"><span><i class="fab fa-twitter-square"></i></span>
            <label class="sr-only">Twitter</label></a>
        </li>
      </ul>
      </div>
      
    </div>
  </div>
</div>
    </nav>
    

    <div class="container-xl">
      <div class="row">
          
            
            <!-- Only show if we have sidebars configured, else just a small margin  -->
            <div class="col-12 col-md-3 bd-sidebar">
              <div class="sidebar-start-items"><form class="bd-search d-flex align-items-center" action="../../../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search the docs ..." aria-label="Search the docs ..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main navigation">
  <div class="bd-toc-item active">
    
  </div>
</nav>
              </div>
              <div class="sidebar-end-items">
              </div>
            </div>
            
          

          
          <div class="d-none d-xl-block col-xl-2 bd-toc">
            
          </div>
          

          
          
            
          
          <main class="col-12 col-md-9 col-xl-7 py-md-5 pl-md-5 pr-md-4 bd-content" role="main">
              
              <div>
                
  <h1>Source code for cup_of_coffee.utils.helpers</h1><div class="highlight"><pre>
<span></span><span class="sd">&quot;&quot;&quot;This module concentrates the help functions to run the functions behind the scenes</span>

<span class="sd">&quot;&quot;&quot;</span>


<span class="c1"># Function list:</span>
<span class="c1">#</span>
<span class="c1">#     - LanguageManagment</span>
<span class="c1">#         - get_language(self)</span>
<span class="c1">#         - set_language(self, language)</span>
<span class="c1">#         - __str__(self)</span>
<span class="c1">#         - __repr__(self)</span>
<span class="c1">#</span>
<span class="c1">#     - AlphaManagement(LanguageManagment)</span>
<span class="c1">#         - get_alfa(self)</span>
<span class="c1">#         - set_alfa(self, alfa)</span>
<span class="c1">#         - __str__(self)</span>
<span class="c1">#         - __repr__(self)</span>
<span class="c1">#</span>
<span class="c1">#</span>
<span class="c1">#     - NDigitsManagement(LanguageManagment)</span>
<span class="c1">#         - get_n_digits(self)</span>
<span class="c1">#         - set_n_digits(self, n_digits)</span>
<span class="c1">#         - __str__(self)</span>
<span class="c1">#         - __repr__(self)</span>
<span class="c1">#</span>
<span class="c1">#     - _change_locale(language, decimal_separator=&quot;.&quot;, local=&quot;pt_BR&quot;)</span>
<span class="c1">#     - _change_locale_back_to_default(default_locale)</span>
<span class="c1">#     - _check_blank_space(value, param_name, language)</span>
<span class="c1">#     - _check_conflicting_filename(file_name, extension, language)</span>
<span class="c1">#     - _check_figure_extension(value, param_name, language)</span>
<span class="c1">#     - _check_file_exists(file_name)</span>
<span class="c1">#     - _check_file_name_is_str(file_name, language)</span>
<span class="c1">#     - _check_forbidden_character(value, param_name, language)</span>
<span class="c1">#     - _check_plot_design(plot_design, param_name, plot_design_default, plot_design_example, language)</span>
<span class="c1">#     - _check_which_density_gaussian_kernal_plot(which, language)</span>
<span class="c1">#     - _export_to_csv(df, file_name=&quot;my_data&quot;, sep=&#39;,&#39;, language)</span>
<span class="c1">#     - _export_to_xlsx(df_list, language, file_name=None, sheet_names=[None,None])</span>
<span class="c1">#     - _flat_list_of_lists(my_list, param_name, language)</span>
<span class="c1">#     - _sep_checker(sep, language)</span>
<span class="c1">#     - _truncate(value, language, decs=None)</span>



<span class="c1">#########################################</span>
<span class="c1">################ Imports ################</span>
<span class="c1">#########################################</span>

<span class="c1">###### Standard ######</span>
<span class="kn">import</span> <span class="nn">locale</span>
<span class="kn">import</span> <span class="nn">logging</span>
<span class="kn">from</span> <span class="nn">pathlib</span> <span class="kn">import</span> <span class="n">Path</span>
<span class="kn">import</span> <span class="nn">traceback</span>

<span class="c1">###### Third part ######</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>

<span class="c1">###### Home made ######</span>
<span class="kn">from</span> <span class="nn">cup_of_coffee.database_management</span> <span class="kn">import</span> <span class="n">management</span>
<span class="kn">from</span> <span class="nn">cup_of_coffee.utils</span> <span class="kn">import</span> <span class="n">general</span>
<span class="kn">from</span> <span class="nn">cup_of_coffee.utils</span> <span class="kn">import</span> <span class="n">checkers</span>


<span class="c1">###########################################</span>
<span class="c1">################ Functions ################</span>
<span class="c1">###########################################</span>



<span class="c1"># with test, with database, with docstring</span>
<div class="viewcode-block" id="LanguageManagement"><a class="viewcode-back" href="../../../source/api/database_management/LanguageManagement.html#cup_of_coffee.utils.helpers.LanguageManagement">[docs]</a><span class="k">class</span> <span class="nc">LanguageManagement</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Instantiates a class for language management. This class is primarily for internal use.</span>

<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">language</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="sd">&quot;&quot;&quot;Constructs the name of the language</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        language : string</span>
<span class="sd">            The abreviation of a language (dafualt None, which means &#39;en&#39;)</span>

<span class="sd">        Notes</span>
<span class="sd">        -----</span>
<span class="sd">        The method does not allow the input of values that are not of type string and that have lenght higher than 5 (due to the database restrictions)</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">all_languages</span> <span class="o">=</span> <span class="n">management</span><span class="o">.</span><span class="n">_get_all_available_languages</span><span class="p">()</span>
        <span class="n">current_default_language</span> <span class="o">=</span> <span class="n">management</span><span class="o">.</span><span class="n">_get_current_default_language</span><span class="p">()</span>

        <span class="c1"># Obtendo o idioma padrão #</span>
        <span class="k">if</span> <span class="n">language</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">language</span> <span class="o">=</span> <span class="n">management</span><span class="o">.</span><span class="n">_get_current_default_language</span><span class="p">()</span>
        <span class="c1"># Caso queria alterar o valor diretamente ao instanciar a classe</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="c1"># verificando se o valor passado é uma string</span>
            <span class="n">checkers</span><span class="o">.</span><span class="n">_check_is_str</span><span class="p">(</span><span class="n">language</span><span class="p">,</span> <span class="s2">&quot;language&quot;</span><span class="p">,</span> <span class="n">current_default_language</span><span class="p">)</span>
            <span class="c1"># agora verificando se o valor passado é um idioma válido</span>
            <span class="k">if</span> <span class="n">language</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">all_languages</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
                <span class="n">all_formated_languages</span> <span class="o">=</span> <span class="p">[</span><span class="sa">f</span><span class="s2">&quot;  ---&gt;  </span><span class="si">{</span><span class="n">lang</span><span class="si">}</span><span class="s2">&quot;</span> <span class="k">for</span> <span class="n">lang</span> <span class="ow">in</span> <span class="n">all_languages</span><span class="p">]</span>
                <span class="n">fk_id_function</span> <span class="o">=</span> <span class="n">management</span><span class="o">.</span><span class="n">_query_func_id</span><span class="p">(</span><span class="s2">&quot;LanguageManagment&quot;</span><span class="p">)</span>
                <span class="n">messages</span> <span class="o">=</span> <span class="n">management</span><span class="o">.</span><span class="n">_get_messages</span><span class="p">(</span><span class="n">fk_id_function</span><span class="p">,</span> <span class="n">current_default_language</span><span class="p">)</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="n">messages</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">])</span>
                <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
                    <span class="n">msg</span> <span class="o">=</span> <span class="p">[</span>
                        <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">messages</span><span class="p">[</span><span class="mi">2</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span><span class="si">}</span><span class="s2"> &#39;</span><span class="si">{</span><span class="n">language</span><span class="si">}</span><span class="s2">&#39; </span><span class="si">{</span><span class="n">messages</span><span class="p">[</span><span class="mi">2</span><span class="p">][</span><span class="mi">2</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>
                        <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">messages</span><span class="p">[</span><span class="mi">2</span><span class="p">][</span><span class="mi">3</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>
                        <span class="n">all_formated_languages</span>
                    <span class="p">]</span>
                    <span class="n">msg</span> <span class="o">=</span> <span class="n">general</span><span class="o">.</span><span class="n">_flatten_list_of_list_string</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
                    <span class="n">msg</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
                    <span class="n">general</span><span class="o">.</span><span class="n">_display_n_line_attention</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
                    <span class="k">raise</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">language</span> <span class="o">=</span> <span class="n">language</span>

<div class="viewcode-block" id="LanguageManagement.get_language"><a class="viewcode-back" href="../../../source/api/database_management/LanguageManagement.html#cup_of_coffee.utils.helpers.LanguageManagement.get_language">[docs]</a>    <span class="k">def</span> <span class="nf">get_language</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Gets the current language</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">language</span></div>

<div class="viewcode-block" id="LanguageManagement.set_language"><a class="viewcode-back" href="../../../source/api/database_management/LanguageManagement.html#cup_of_coffee.utils.helpers.LanguageManagement.set_language">[docs]</a>    <span class="k">def</span> <span class="nf">set_language</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">language</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Changes the current language</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        language : ``str``</span>
<span class="sd">            The language code</span>

<span class="sd">        Notes</span>
<span class="sd">        -----</span>
<span class="sd">        The ``language`` must be a ``str`` with no more then ``5`` elements.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">all_languages</span> <span class="o">=</span> <span class="n">management</span><span class="o">.</span><span class="n">_get_all_available_languages</span><span class="p">()</span>
        <span class="c1"># verificando se o valor passado é uma string</span>
        <span class="n">checkers</span><span class="o">.</span><span class="n">_check_is_str</span><span class="p">(</span><span class="n">language</span><span class="p">,</span> <span class="s2">&quot;language&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">language</span><span class="p">)</span>
        <span class="c1"># agora verificando se o valor passado é um idioma válido</span>
        <span class="k">if</span> <span class="n">language</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">all_languages</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
            <span class="n">all_formated_languages</span> <span class="o">=</span> <span class="p">[</span><span class="sa">f</span><span class="s2">&quot;  ---&gt;  </span><span class="si">{</span><span class="n">lang</span><span class="si">}</span><span class="s2">&quot;</span> <span class="k">for</span> <span class="n">lang</span> <span class="ow">in</span> <span class="n">all_languages</span><span class="p">]</span>
            <span class="n">fk_id_function</span> <span class="o">=</span> <span class="n">management</span><span class="o">.</span><span class="n">_query_func_id</span><span class="p">(</span><span class="s2">&quot;LanguageManagment&quot;</span><span class="p">)</span>
            <span class="n">messages</span> <span class="o">=</span> <span class="n">management</span><span class="o">.</span><span class="n">_get_messages</span><span class="p">(</span><span class="n">fk_id_function</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">language</span><span class="p">)</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="n">messages</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">])</span>
            <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
                <span class="n">msg</span> <span class="o">=</span> <span class="p">[</span>
                    <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">messages</span><span class="p">[</span><span class="mi">2</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span><span class="si">}</span><span class="s2"> &#39;</span><span class="si">{</span><span class="n">language</span><span class="si">}</span><span class="s2">&#39; </span><span class="si">{</span><span class="n">messages</span><span class="p">[</span><span class="mi">2</span><span class="p">][</span><span class="mi">2</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>
                    <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">messages</span><span class="p">[</span><span class="mi">2</span><span class="p">][</span><span class="mi">3</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>
                    <span class="n">all_formated_languages</span>
                <span class="p">]</span>
                <span class="n">msg</span> <span class="o">=</span> <span class="n">general</span><span class="o">.</span><span class="n">_flatten_list_of_list_string</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
                <span class="n">msg</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
                <span class="n">general</span><span class="o">.</span><span class="n">_display_n_line_attention</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
                <span class="k">raise</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">language</span> <span class="o">=</span> <span class="n">language</span></div>

    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">fk_id_function</span> <span class="o">=</span> <span class="n">management</span><span class="o">.</span><span class="n">_query_func_id</span><span class="p">(</span><span class="s2">&quot;LanguageManagement&quot;</span><span class="p">)</span>
        <span class="n">messages</span> <span class="o">=</span> <span class="n">management</span><span class="o">.</span><span class="n">_get_messages</span><span class="p">(</span><span class="n">fk_id_function</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">language</span><span class="p">)</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">messages</span><span class="p">[</span><span class="mi">5</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span><span class="si">}</span><span class="s2"> &#39;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">language</span><span class="si">}</span><span class="s2">&#39;&quot;</span>

    <span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">language</span></div>

<span class="c1"># with test, with database, with docstring</span>
<div class="viewcode-block" id="AlphaManagement"><a class="viewcode-back" href="../../../source/api/helpers/AlphaManagement.html#cup_of_coffee.utils.helpers.AlphaManagement">[docs]</a><span class="k">class</span> <span class="nc">AlphaManagement</span><span class="p">(</span><span class="n">LanguageManagement</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Instanciates a class for alpha managment.</span>

<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">alfa</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="sd">&quot;&quot;&quot;Constructs the significance level value</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        alfa : ``float``</span>
<span class="sd">            The significance level (default is ``None``, which means ``0.05``)</span>

<span class="sd">        Notes</span>
<span class="sd">        -----</span>
<span class="sd">        This method only allows input of type ``float`` and between ``0.0`` and ``1.0``.</span>

<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">if</span> <span class="n">alfa</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">alfa</span> <span class="o">=</span> <span class="mf">0.05</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">checkers</span><span class="o">.</span><span class="n">_check_is_float</span><span class="p">(</span><span class="n">alfa</span><span class="p">,</span> <span class="s2">&quot;alfa&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">language</span><span class="p">)</span>
            <span class="n">checkers</span><span class="o">.</span><span class="n">_check_data_in_range</span><span class="p">(</span><span class="n">alfa</span><span class="p">,</span> <span class="s2">&quot;alfa&quot;</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">language</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">alfa</span> <span class="o">=</span> <span class="n">alfa</span>

<div class="viewcode-block" id="AlphaManagement.get_alfa"><a class="viewcode-back" href="../../../source/api/helpers/AlphaManagement.html#cup_of_coffee.utils.helpers.AlphaManagement.get_alfa">[docs]</a>    <span class="k">def</span> <span class="nf">get_alfa</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Gets the current ``alpha`` value</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">alfa</span></div>

<div class="viewcode-block" id="AlphaManagement.set_alfa"><a class="viewcode-back" href="../../../source/api/helpers/AlphaManagement.html#cup_of_coffee.utils.helpers.AlphaManagement.set_alfa">[docs]</a>    <span class="k">def</span> <span class="nf">set_alfa</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">alfa</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Changes the ``alpha`` value</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        alfa : ``float``</span>
<span class="sd">            The new significance level</span>

<span class="sd">        Notes</span>
<span class="sd">        -----</span>
<span class="sd">        This method only allows input of type ``float`` and between ``0.0`` and ``1.0``.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">checkers</span><span class="o">.</span><span class="n">_check_is_float</span><span class="p">(</span><span class="n">alfa</span><span class="p">,</span> <span class="s2">&quot;alfa&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">language</span><span class="p">)</span>
        <span class="n">checkers</span><span class="o">.</span><span class="n">_check_data_in_range</span><span class="p">(</span><span class="n">alfa</span><span class="p">,</span> <span class="s2">&quot;alfa&quot;</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">language</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">alfa</span> <span class="o">=</span> <span class="n">alfa</span></div>

    <span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">alfa</span>

    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">fk_id_function</span> <span class="o">=</span> <span class="n">management</span><span class="o">.</span><span class="n">_query_func_id</span><span class="p">(</span><span class="s2">&quot;AlphaManagement&quot;</span><span class="p">)</span>
        <span class="n">messages</span> <span class="o">=</span> <span class="n">management</span><span class="o">.</span><span class="n">_get_messages</span><span class="p">(</span><span class="n">fk_id_function</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">language</span><span class="p">)</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">messages</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span><span class="si">}</span><span class="s2"> &#39;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">alfa</span><span class="si">}</span><span class="s2">&#39;&quot;</span></div>

<span class="c1"># with test, with database, with docstring</span>
<div class="viewcode-block" id="NDigitsManagement"><a class="viewcode-back" href="../../../source/api/helpers/NDigitsManagement.html#cup_of_coffee.utils.helpers.NDigitsManagement">[docs]</a><span class="k">class</span> <span class="nc">NDigitsManagement</span><span class="p">(</span><span class="n">LanguageManagement</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Instanciates a class for n_digits managment.</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">n_digits</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="sd">&quot;&quot;&quot;Constructs the n_digits value</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        n_digits : ``int``</span>
<span class="sd">            The maximum number of decimal places that the calculated parameters can have, ``default = 4``.</span>

<span class="sd">        Notes</span>
<span class="sd">        -----</span>
<span class="sd">        This method only accepts ``int`` values higher than ``0``.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">n_digits</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">n_digits</span> <span class="o">=</span> <span class="mi">4</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">checkers</span><span class="o">.</span><span class="n">_check_is_integer</span><span class="p">(</span><span class="n">n_digits</span><span class="p">,</span> <span class="s2">&quot;n_digits&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">language</span><span class="p">)</span>
            <span class="n">checkers</span><span class="o">.</span><span class="n">_check_is_positive</span><span class="p">(</span><span class="n">n_digits</span><span class="p">,</span> <span class="s2">&quot;n_digits&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">language</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">n_digits</span> <span class="o">=</span> <span class="n">n_digits</span>

<div class="viewcode-block" id="NDigitsManagement.get_n_digits"><a class="viewcode-back" href="../../../source/api/helpers/NDigitsManagement.html#cup_of_coffee.utils.helpers.NDigitsManagement.get_n_digits">[docs]</a>    <span class="k">def</span> <span class="nf">get_n_digits</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Gets the ``n_digits`` parameter</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">n_digits</span></div>

<div class="viewcode-block" id="NDigitsManagement.set_n_digits"><a class="viewcode-back" href="../../../source/api/helpers/NDigitsManagement.html#cup_of_coffee.utils.helpers.NDigitsManagement.set_n_digits">[docs]</a>    <span class="k">def</span> <span class="nf">set_n_digits</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">n_digits</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Sets the ``n_digits`` parameter</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        n_digits : ``int``</span>
<span class="sd">            The maximum number of decimal places to be shown.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">checkers</span><span class="o">.</span><span class="n">_check_is_integer</span><span class="p">(</span><span class="n">n_digits</span><span class="p">,</span> <span class="s2">&quot;n_digits&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">language</span><span class="p">)</span>
        <span class="n">checkers</span><span class="o">.</span><span class="n">_check_is_positive</span><span class="p">(</span><span class="n">n_digits</span><span class="p">,</span> <span class="s2">&quot;n_digits&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">language</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">n_digits</span> <span class="o">=</span> <span class="n">n_digits</span></div>

    <span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">n_digits</span>

    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">fk_id_function</span> <span class="o">=</span> <span class="n">management</span><span class="o">.</span><span class="n">_query_func_id</span><span class="p">(</span><span class="s2">&quot;NDigitsManagement&quot;</span><span class="p">)</span>
        <span class="n">messages</span> <span class="o">=</span> <span class="n">management</span><span class="o">.</span><span class="n">_get_messages</span><span class="p">(</span><span class="n">fk_id_function</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">language</span><span class="p">)</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">messages</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span><span class="si">}</span><span class="s2"> &#39;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">n_digits</span><span class="si">}</span><span class="s2">&#39;&quot;</span></div>

<span class="c1"># with tests, with text, with database, with docstring</span>
<span class="k">def</span> <span class="nf">_change_locale</span><span class="p">(</span><span class="n">language</span><span class="p">,</span> <span class="n">decimal_separator</span><span class="o">=</span><span class="s2">&quot;.&quot;</span><span class="p">,</span> <span class="n">local</span><span class="o">=</span><span class="s2">&quot;pt_BR&quot;</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;This function momentarily changes the decimal separator used in charts.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    decimal_separator : string (default &quot;.&quot;)</span>
<span class="sd">        The decimal separator symbol. It can be the dot (default &#39;.&#39;) or the comma (&#39;,&#39;).</span>
<span class="sd">    local : string (default &quot;pt_BR&quot;)</span>
<span class="sd">        The alias for the desired locale. Only used if decimal_separator is a comma, setting matplolib&#39;s default value. Its only function is to change the decimal separator symbol and should be changed only if the &quot;pt_BR&quot; option is not available.</span>
<span class="sd">    language : string</span>
<span class="sd">        The language code</span>

<span class="sd">    Notes</span>
<span class="sd">    -----</span>
<span class="sd">    The parameter &#39;language&#39; isn&#39;t checked if it is a string.</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    default_locale : The user&#39;s system default value (string or None)</span>
<span class="sd">        - None if the default values are used</span>
<span class="sd">        - String with the user&#39;s system default value, which will be passed to the _change_locale_back_to_default() function to restore the user&#39;s default value</span>

<span class="sd">    Notes</span>
<span class="sd">    -----</span>
<span class="sd">    This function must always be used in conjunction with the _change_locale_back_to_default(default_locale) function.</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># conferindo o local</span>
    <span class="n">checkers</span><span class="o">.</span><span class="n">_check_is_str</span><span class="p">(</span><span class="n">local</span><span class="p">,</span> <span class="s2">&quot;local&quot;</span><span class="p">,</span> <span class="n">language</span><span class="p">)</span>
    <span class="c1"># conferindo o decimal_separator</span>
    <span class="n">checkers</span><span class="o">.</span><span class="n">_check_is_str</span><span class="p">(</span><span class="n">decimal_separator</span><span class="p">,</span> <span class="s2">&quot;decimal_separator&quot;</span><span class="p">,</span> <span class="n">language</span><span class="p">)</span>
    <span class="n">current_decimal_separator_available</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;.&quot;</span><span class="p">,</span> <span class="s2">&quot;,&quot;</span><span class="p">]</span>
    <span class="c1"># querring</span>
    <span class="n">func_name</span> <span class="o">=</span> <span class="s2">&quot;_change_locale&quot;</span>
    <span class="n">fk_id_function</span> <span class="o">=</span> <span class="n">management</span><span class="o">.</span><span class="n">_query_func_id</span><span class="p">(</span><span class="n">func_name</span><span class="p">)</span>
    <span class="n">messages</span> <span class="o">=</span> <span class="n">management</span><span class="o">.</span><span class="n">_get_messages</span><span class="p">(</span><span class="n">fk_id_function</span><span class="p">,</span> <span class="n">language</span><span class="p">,</span> <span class="n">func_name</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">decimal_separator</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">current_decimal_separator_available</span><span class="p">:</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="n">messages</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">])</span>
        <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
            <span class="n">general</span><span class="o">.</span><span class="n">_display_one_line_attention</span><span class="p">(</span>
                    <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">messages</span><span class="p">[</span><span class="mi">2</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span><span class="si">}</span><span class="s2"> &#39;decimal_separator&#39; </span><span class="si">{</span><span class="n">messages</span><span class="p">[</span><span class="mi">2</span><span class="p">][</span><span class="mi">2</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span><span class="si">}</span><span class="s2"> &#39;</span><span class="si">{</span><span class="n">decimal_separator</span><span class="si">}</span><span class="s2">&#39;&quot;</span><span class="p">,</span>
                                <span class="p">)</span>
            <span class="k">raise</span>
    <span class="k">if</span> <span class="n">decimal_separator</span> <span class="o">==</span> <span class="s2">&quot;,&quot;</span><span class="p">:</span>
        <span class="n">default_locale</span> <span class="o">=</span> <span class="n">locale</span><span class="o">.</span><span class="n">getdefaultlocale</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">locale</span><span class="o">.</span><span class="n">setlocale</span><span class="p">(</span><span class="n">locale</span><span class="o">.</span><span class="n">LC_NUMERIC</span><span class="p">,</span> <span class="n">local</span><span class="p">)</span>
            <span class="n">plt</span><span class="o">.</span><span class="n">rcParams</span><span class="p">[</span><span class="s1">&#39;axes.formatter.use_locale&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="k">except</span> <span class="n">locale</span><span class="o">.</span><span class="n">Error</span><span class="p">:</span>
            <span class="n">general</span><span class="o">.</span><span class="n">_display_one_line_attention</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">messages</span><span class="p">[</span><span class="mi">3</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">local</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">messages</span><span class="p">[</span><span class="mi">3</span><span class="p">][</span><span class="mi">2</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="p">)</span>
            <span class="k">raise</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">default_locale</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="k">return</span> <span class="n">default_locale</span>

<span class="c1"># with a test, no text, no database, with docstring</span>
<span class="k">def</span> <span class="nf">_change_locale_back_to_default</span><span class="p">(</span><span class="n">default_locale</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;This function restores the local parameter to its default value.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    default_locale : string</span>
<span class="sd">        The default value of locale, which is obtained through the _change_locale() function</span>

<span class="sd">    Notes</span>
<span class="sd">    -----</span>
<span class="sd">    This function must always be used in conjunction with the _change_locale(decimal_separator=&quot;.&quot;, local=&quot;pt_BR&quot;) function.</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">default_locale</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">locale</span><span class="o">.</span><span class="n">setlocale</span><span class="p">(</span><span class="n">locale</span><span class="o">.</span><span class="n">LC_NUMERIC</span><span class="p">,</span> <span class="n">default_locale</span><span class="p">)</span>
        <span class="n">plt</span><span class="o">.</span><span class="n">rcParams</span><span class="p">[</span><span class="s1">&#39;axes.formatter.use_locale&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">False</span>

<span class="c1"># with tests, with text, with database, with docstring</span>
<span class="k">def</span> <span class="nf">_check_blank_space</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">param_name</span><span class="p">,</span> <span class="n">language</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;This function checks if a string has white space</span>

<span class="sd">    The function compares the length of &#39;value&#39; with the length of first element in value.split(). If these lengths are equal, &#39;value&#39; has no white space.</span>
<span class="sd">    The function does not check if value is a string, and this should be done previously to prevent errors.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    value : string</span>
<span class="sd">        The string to be evaluated</span>
<span class="sd">    param_name : string</span>
<span class="sd">        The param_name</span>
<span class="sd">    language : string</span>
<span class="sd">        The language code</span>

<span class="sd">    Notes</span>
<span class="sd">    -----</span>
<span class="sd">    The parameter &#39;param_name&#39; isn&#39;t checked if it is a string.</span>
<span class="sd">    The parameter &#39;language&#39; isn&#39;t checked if it is a string.</span>


<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">        True is value does not have white space</span>
<span class="sd">        Raises ValueError if value has white space</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">checkers</span><span class="o">.</span><span class="n">_check_is_str</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">param_name</span><span class="p">,</span> <span class="n">language</span><span class="p">)</span>
    <span class="n">value_size</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
    <span class="n">value_split</span> <span class="o">=</span> <span class="n">value</span><span class="o">.</span><span class="n">split</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span>
    <span class="n">value_split_size</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">value_split</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">value_size</span> <span class="o">==</span> <span class="n">value_split_size</span><span class="p">:</span>
        <span class="k">return</span> <span class="kc">True</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">func_name</span> <span class="o">=</span> <span class="s2">&quot;_check_blank_space&quot;</span>
        <span class="n">fk_id_function</span> <span class="o">=</span> <span class="n">management</span><span class="o">.</span><span class="n">_query_func_id</span><span class="p">(</span><span class="n">func_name</span><span class="p">)</span>
        <span class="n">messages</span> <span class="o">=</span> <span class="n">management</span><span class="o">.</span><span class="n">_get_messages</span><span class="p">(</span><span class="n">fk_id_function</span><span class="p">,</span> <span class="n">language</span><span class="p">,</span> <span class="n">func_name</span><span class="p">)</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="n">messages</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">])</span>
        <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
            <span class="n">general</span><span class="o">.</span><span class="n">_display_one_line_attention</span><span class="p">(</span>
                                <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">messages</span><span class="p">[</span><span class="mi">2</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span><span class="si">}</span><span class="s2"> &#39;</span><span class="si">{</span><span class="n">value</span><span class="si">}</span><span class="s2">&#39; </span><span class="si">{</span><span class="n">messages</span><span class="p">[</span><span class="mi">2</span><span class="p">][</span><span class="mi">2</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>
                                <span class="p">)</span>
            <span class="k">raise</span>

<span class="c1"># with test, with database, with docstring</span>
<span class="k">def</span> <span class="nf">_check_conflicting_filename</span><span class="p">(</span><span class="n">file_name</span><span class="p">,</span> <span class="n">extension</span><span class="p">,</span> <span class="n">language</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;This function checks if a file exists in the current directory. If it exists, it returns a different name for the file, so as not to overwrite existing files.</span>

<span class="sd">    Paramters</span>
<span class="sd">    ---------</span>
<span class="sd">    file_name : string</span>
<span class="sd">        The name of the file to be exported, without its extension</span>
<span class="sd">    extension : string</span>
<span class="sd">        The file extension</span>
<span class="sd">    language : string</span>
<span class="sd">        The language code</span>

<span class="sd">    Notes</span>
<span class="sd">    -----</span>
<span class="sd">    The parameter &#39;file_name&#39; isn&#39;t checked if it is a string.</span>
<span class="sd">    The parameter &#39;extension&#39; isn&#39;t checked if it is a string.</span>
<span class="sd">    The parameter &#39;language&#39; isn&#39;t checked if it is a string.</span>

<span class="sd">    If the file_name + extension does not exists in the current directory, the output os file_name + &quot;.&quot; + extension</span>
<span class="sd">    If the file_name + extension exists in the current directory, a string (&quot;_n&quot;) is inserted at the end od the file_name (where n is a number). Is this is true, the user is wanrned about it.</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    file_name : string</span>
<span class="sd">        The file name that does not exists in the current directory</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1">### Baptism of Fire ###</span>
    <span class="n">file</span> <span class="o">=</span> <span class="n">file_name</span> <span class="o">+</span> <span class="s2">&quot;.&quot;</span> <span class="o">+</span> <span class="n">extension</span>
    <span class="c1"># if the file already exists, create a new name for the file</span>
    <span class="n">file_exists</span> <span class="o">=</span> <span class="n">_check_file_exists</span><span class="p">(</span><span class="n">file</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">file_exists</span><span class="p">:</span>
        <span class="c1">### quering ###</span>
        <span class="n">func_name</span> <span class="o">=</span> <span class="s2">&quot;_check_conflicting_filename&quot;</span>
        <span class="n">fk_id_function</span> <span class="o">=</span> <span class="n">management</span><span class="o">.</span><span class="n">_query_func_id</span><span class="p">(</span><span class="n">func_name</span><span class="p">)</span>
        <span class="n">messages</span> <span class="o">=</span> <span class="n">management</span><span class="o">.</span><span class="n">_get_messages</span><span class="p">(</span><span class="n">fk_id_function</span><span class="p">,</span> <span class="n">language</span><span class="p">,</span> <span class="n">func_name</span><span class="p">)</span>
        <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="n">msg_1</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">messages</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span><span class="si">}</span><span class="s2"> &#39;</span><span class="si">{</span><span class="n">file</span><span class="si">}</span><span class="s2">&#39; </span><span class="si">{</span><span class="n">messages</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">2</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="c1"># try to create a new name by adding a number to the end of the name.</span>
        <span class="k">while</span> <span class="n">file_exists</span><span class="p">:</span>
            <span class="n">i</span> <span class="o">+=</span> <span class="mi">1</span>
            <span class="n">file</span> <span class="o">=</span> <span class="n">file_name</span> <span class="o">+</span> <span class="s2">&quot;_&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">i</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;.&quot;</span> <span class="o">+</span> <span class="n">extension</span>
            <span class="n">file_exists</span> <span class="o">=</span> <span class="n">_check_file_exists</span><span class="p">(</span><span class="n">file</span><span class="p">)</span>
        <span class="n">file_name</span> <span class="o">=</span> <span class="n">file</span>
        <span class="c1"># warn that the file already exists</span>
        <span class="c1"># warn the user the name of the file to be exported</span>
        <span class="n">general</span><span class="o">.</span><span class="n">_display_n_line_warn</span><span class="p">([</span>
                        <span class="sa">f</span><span class="s2">&quot;    </span><span class="si">{</span><span class="n">messages</span><span class="p">[</span><span class="mi">2</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>
                        <span class="n">msg_1</span><span class="p">,</span>
                        <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">messages</span><span class="p">[</span><span class="mi">3</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span><span class="si">}</span><span class="s2"> &#39;</span><span class="si">{</span><span class="n">file_name</span><span class="si">}</span><span class="s2">&#39;&quot;</span>
                        <span class="p">])</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">file_name</span> <span class="o">=</span> <span class="n">file</span>
    <span class="k">return</span> <span class="n">file_name</span>

<span class="c1"># with test, with text, with database, with docstring</span>
<span class="k">def</span> <span class="nf">_check_figure_extension</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">param_name</span><span class="p">,</span> <span class="n">language</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;This function checks if &#39;value&#39; is one of the extensions available for exporting figures using matplotlib.</span>

<span class="sd">    The allowed extensions for matlab version 3.5 are:</span>
<span class="sd">        &#39;eps&#39;  : &#39;Encapsulated Postscript&#39;</span>
<span class="sd">        &#39;jpg&#39;  : &#39;Joint Photographic Experts Group&#39;</span>
<span class="sd">        &#39;jpeg&#39; : &#39;Joint Photographic Experts Group&#39;</span>
<span class="sd">        &#39;pdf&#39;  : &#39;Portable Document Format&#39;</span>
<span class="sd">        &#39;pgf&#39;  : &#39;PGF code for LaTeX&#39;</span>
<span class="sd">        &#39;png&#39;  : &#39;Portable Network Graphics&#39;</span>
<span class="sd">        &#39;ps&#39;   : &#39;Postscript&#39;</span>
<span class="sd">        &#39;raw&#39;  : &#39;Raw RGBA bitmap&#39;</span>
<span class="sd">        &#39;rgba&#39; : &#39;Raw RGBA bitmap&#39;</span>
<span class="sd">        &#39;svg&#39;  : &#39;Scalable Vector Graphics&#39;</span>
<span class="sd">        &#39;svgz&#39; : &#39;Scalable Vector Graphics&#39;</span>
<span class="sd">        &#39;tif&#39;  : &#39;Tagged Image File Format&#39;</span>
<span class="sd">        &#39;tiff&#39; : &#39;Tagged Image File Format&#39;</span>

<span class="sd">    However, the options are checked using plt.gcf().canvas.get_supported_filetypes().</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    value : string</span>
<span class="sd">        The value to check if it is a valid extension for figure creation.</span>
<span class="sd">    param_name : string</span>
<span class="sd">        The original name of the parameter passed through the parameter &#39;value&#39;.</span>
<span class="sd">    language : string</span>
<span class="sd">        The language code</span>

<span class="sd">    Notes</span>
<span class="sd">    -----</span>
<span class="sd">    The parameter &#39;param_name&#39; isn&#39;t checked if it is a string.</span>
<span class="sd">    The parameter &#39;language&#39; isn&#39;t checked if it is a string.</span>

<span class="sd">    To check the supported extensions on your system, use:</span>

<span class="sd">    &gt;&gt;&gt; from matplotlib import pyplot as plt</span>
<span class="sd">    &gt;&gt;&gt; suported_types = plt.gcf().canvas.get_supported_filetypes()</span>
<span class="sd">    &gt;&gt;&gt; for key, value in suported_types.items():</span>
<span class="sd">            print(key, &quot;:&quot;, value)</span>
<span class="sd">    &gt;&gt;&gt; plt.close()</span>
<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    True if &#39;value&#39; is an allowed extension.</span>
<span class="sd">    Raises ValueError is &#39;value&#39; is not an allowed extension.</span>


<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">suported_types</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">gcf</span><span class="p">()</span><span class="o">.</span><span class="n">canvas</span><span class="o">.</span><span class="n">get_supported_filetypes</span><span class="p">()</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">close</span><span class="p">()</span> <span class="c1"># essencial, pois o acima criar uma figura em branco, e caso o código seja ativado vai criar essa fig em branco</span>
    <span class="k">if</span> <span class="n">value</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">suported_types</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
        <span class="c1">### quering ###</span>
        <span class="n">func_name</span> <span class="o">=</span> <span class="s2">&quot;_check_figure_extension&quot;</span>
        <span class="n">fk_id_function</span> <span class="o">=</span> <span class="n">management</span><span class="o">.</span><span class="n">_query_func_id</span><span class="p">(</span><span class="n">func_name</span><span class="p">)</span>
        <span class="n">messages</span> <span class="o">=</span> <span class="n">management</span><span class="o">.</span><span class="n">_get_messages</span><span class="p">(</span><span class="n">fk_id_function</span><span class="p">,</span> <span class="n">language</span><span class="p">,</span> <span class="n">func_name</span><span class="p">)</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="n">messages</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">])</span>
        <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
            <span class="n">extensions_allowed</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">suported_types</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                <span class="n">extensions_allowed</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;    ---&gt;    &#39;</span><span class="si">{</span><span class="n">key</span><span class="si">}</span><span class="s2">&#39;:  </span><span class="si">{</span><span class="n">value</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

            <span class="n">msg</span> <span class="o">=</span> <span class="p">[</span>
                <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">messages</span><span class="p">[</span><span class="mi">2</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span><span class="si">}</span><span class="s2"> &#39;</span><span class="si">{</span><span class="n">value</span><span class="si">}</span><span class="s2">&#39; </span><span class="si">{</span><span class="n">messages</span><span class="p">[</span><span class="mi">2</span><span class="p">][</span><span class="mi">2</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span><span class="si">}</span><span class="s2"> &#39;</span><span class="si">{</span><span class="n">param_name</span><span class="si">}</span><span class="s2">&#39; </span><span class="si">{</span><span class="n">messages</span><span class="p">[</span><span class="mi">2</span><span class="p">][</span><span class="mi">4</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span><span class="si">}</span><span class="s2">!&quot;</span><span class="p">,</span>
                <span class="n">messages</span><span class="p">[</span><span class="mi">3</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">],</span>
                <span class="n">extensions_allowed</span>
                <span class="p">]</span>
            <span class="n">flat_list</span> <span class="o">=</span> <span class="n">general</span><span class="o">.</span><span class="n">_flatten_list_of_list_string</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
            <span class="n">flat_list</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">flat_list</span><span class="p">)</span>
            <span class="n">general</span><span class="o">.</span><span class="n">_display_n_line_attention</span><span class="p">(</span>
                <span class="n">flat_list</span>
            <span class="p">)</span>
            <span class="k">raise</span>
    <span class="k">return</span> <span class="kc">True</span>

<span class="c1"># with tests, with no text with no database, with docstring</span>
<span class="k">def</span> <span class="nf">_check_file_exists</span><span class="p">(</span><span class="n">file_name</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;This function checks if a file already exists on the current folder</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    file_name : string</span>
<span class="sd">        The file name (with extension).</span>

<span class="sd">    Return</span>
<span class="sd">    ------</span>
<span class="sd">    True if file already exists</span>
<span class="sd">    or</span>
<span class="sd">    False if file does not exists</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">file</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="n">file_name</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">file</span><span class="o">.</span><span class="n">exists</span><span class="p">():</span>
        <span class="k">return</span> <span class="kc">True</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="kc">False</span>

<span class="c1"># with tests, with no text with no database, with docstring</span>
<span class="k">def</span> <span class="nf">_check_file_name_is_str</span><span class="p">(</span><span class="n">file_name</span><span class="p">,</span> <span class="n">language</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;This function checks if a variable can be the name of a file, checking if it is of type string and if its size is greater than zero.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    file_name : string</span>
<span class="sd">    language : string</span>
<span class="sd">        The language code</span>

<span class="sd">    Notes</span>
<span class="sd">    -----</span>
<span class="sd">    The parameter &#39;language&#39; isn&#39;t checked if it is a string.</span>

<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">file_name</span><span class="p">,</span> <span class="nb">str</span><span class="p">)</span> <span class="o">==</span> <span class="kc">False</span><span class="p">:</span>
        <span class="c1">### quering ###</span>
        <span class="n">func_name</span> <span class="o">=</span> <span class="s2">&quot;_check_file_name_is_str&quot;</span>
        <span class="n">fk_id_function</span> <span class="o">=</span> <span class="n">management</span><span class="o">.</span><span class="n">_query_func_id</span><span class="p">(</span><span class="n">func_name</span><span class="p">)</span>
        <span class="n">messages</span> <span class="o">=</span> <span class="n">management</span><span class="o">.</span><span class="n">_get_messages</span><span class="p">(</span><span class="n">fk_id_function</span><span class="p">,</span> <span class="n">language</span><span class="p">,</span> <span class="n">func_name</span><span class="p">)</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="n">messages</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">])</span>
        <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
            <span class="n">general</span><span class="o">.</span><span class="n">_display_one_line_attention</span><span class="p">(</span>
                                <span class="n">text</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">messages</span><span class="p">[</span><span class="mi">2</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span><span class="si">}</span><span class="s2"> &#39;</span><span class="si">{</span><span class="nb">str</span><span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">file_name</span><span class="p">)</span><span class="o">.</span><span class="vm">__name__</span><span class="p">)</span><span class="si">}</span><span class="s2">&#39;&quot;</span>
                                <span class="p">)</span>
            <span class="k">raise</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">file_name</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
        <span class="n">func_name</span> <span class="o">=</span> <span class="s2">&quot;_check_file_name_is_str&quot;</span>
        <span class="n">fk_id_function</span> <span class="o">=</span> <span class="n">management</span><span class="o">.</span><span class="n">_query_func_id</span><span class="p">(</span><span class="n">func_name</span><span class="p">)</span>
        <span class="n">messages</span> <span class="o">=</span> <span class="n">management</span><span class="o">.</span><span class="n">_get_messages</span><span class="p">(</span><span class="n">fk_id_function</span><span class="p">,</span> <span class="n">language</span><span class="p">,</span> <span class="n">func_name</span><span class="p">)</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="n">messages</span><span class="p">[</span><span class="mi">3</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">])</span>
        <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
            <span class="c1"># &quot;query&quot;</span>
            <span class="n">general</span><span class="o">.</span><span class="n">_display_one_line_attention</span><span class="p">(</span>
                                <span class="n">text</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">messages</span><span class="p">[</span><span class="mi">4</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span>
                                <span class="p">)</span>
            <span class="k">raise</span>

<span class="c1"># with tests, with text, with database, with docstring</span>
<span class="k">def</span> <span class="nf">_check_forbidden_character</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">param_name</span><span class="p">,</span> <span class="n">language</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;This function checks if there are characters that can be problematic for a file name.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    value : string</span>
<span class="sd">        The value to check if it has some espcific characters.</span>
<span class="sd">    param_name : string</span>
<span class="sd">        The original name of the parameter passed through the parameter &#39;value&#39;.</span>
<span class="sd">    language : string</span>
<span class="sd">        The language code</span>

<span class="sd">    Notes</span>
<span class="sd">    -----</span>
<span class="sd">    The parameter &#39;param_name&#39; isn&#39;t checked if it is a string.</span>
<span class="sd">    The parameter &#39;language&#39; isn&#39;t checked if it is a string.</span>

<span class="sd">    This function checks if a string contains some characters that can be problematic for saving files.</span>
<span class="sd">    The forbidden characters are:</span>

<span class="sd">        &quot;/&quot;: &#39;forward slash&#39;,</span>
<span class="sd">        &quot;&lt;&quot;: &quot;less than&quot;,</span>
<span class="sd">        &quot;&gt;&quot;: &quot;greater than&quot;,</span>
<span class="sd">        &quot;:&quot;: &quot;colon&quot;,</span>
<span class="sd">        &quot;\&quot;&quot;: &quot;double quote&quot;,</span>
<span class="sd">        &quot;\\&quot;: &quot;back slash&quot;,</span>
<span class="sd">        &quot;|&quot;: &quot;vertical bar&quot;,</span>
<span class="sd">        &quot;?&quot;: &quot;question mark&quot;,</span>
<span class="sd">        &quot;*&quot;: &quot;asterisk&quot;,</span>
<span class="sd">        &quot;.&quot;: &quot;dot&quot;,</span>
<span class="sd">        &quot;,&quot;: &quot;comma&quot;,</span>
<span class="sd">        &quot;[&quot;: &quot;left square bracket&quot;,</span>
<span class="sd">        &quot;]&quot;: &quot;right square bracket&quot;,</span>
<span class="sd">        &quot;;&quot;: &quot;semicolon&quot;,</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    True if value does not have any forbidden.</span>
<span class="sd">    Raises ValueError is value is not a valid string.</span>

<span class="sd">    References</span>
<span class="sd">    ----------</span>
<span class="sd">    .. [1] https://stackoverflow.com/a/31976060/17872198</span>
<span class="sd">    .. [2] https://stackoverflow.com/q/1976007/17872198</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">list_of_forbbiden</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s2">&quot;/&quot;</span><span class="p">:</span> <span class="s1">&#39;forward slash&#39;</span><span class="p">,</span>
        <span class="s2">&quot;&lt;&quot;</span><span class="p">:</span> <span class="s2">&quot;less than&quot;</span><span class="p">,</span>
        <span class="s2">&quot;&gt;&quot;</span><span class="p">:</span> <span class="s2">&quot;greater than&quot;</span><span class="p">,</span>
        <span class="s2">&quot;:&quot;</span><span class="p">:</span> <span class="s2">&quot;colon&quot;</span><span class="p">,</span>
        <span class="s2">&quot;</span><span class="se">\&quot;</span><span class="s2">&quot;</span><span class="p">:</span> <span class="s2">&quot;double quote&quot;</span><span class="p">,</span>
        <span class="s2">&quot;</span><span class="se">\\</span><span class="s2">&quot;</span><span class="p">:</span> <span class="s2">&quot;back slash&quot;</span><span class="p">,</span>
        <span class="s2">&quot;|&quot;</span><span class="p">:</span> <span class="s2">&quot;vertical bar&quot;</span><span class="p">,</span>
        <span class="s2">&quot;?&quot;</span><span class="p">:</span> <span class="s2">&quot;question mark&quot;</span><span class="p">,</span>
        <span class="s2">&quot;*&quot;</span><span class="p">:</span> <span class="s2">&quot;asterisk&quot;</span><span class="p">,</span>
        <span class="s2">&quot;.&quot;</span><span class="p">:</span> <span class="s2">&quot;dot&quot;</span><span class="p">,</span>
        <span class="s2">&quot;,&quot;</span><span class="p">:</span> <span class="s2">&quot;comma&quot;</span><span class="p">,</span>
        <span class="s2">&quot;[&quot;</span><span class="p">:</span> <span class="s2">&quot;left square bracket&quot;</span><span class="p">,</span>
        <span class="s2">&quot;]&quot;</span><span class="p">:</span> <span class="s2">&quot;right square bracket&quot;</span><span class="p">,</span>
        <span class="s2">&quot;;&quot;</span><span class="p">:</span> <span class="s2">&quot;semicolon&quot;</span><span class="p">,</span>
    <span class="p">}</span>
    <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">list_of_forbbiden</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
        <span class="k">if</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">value</span><span class="p">:</span>
            <span class="c1">### quering ###</span>
            <span class="n">func_name</span> <span class="o">=</span> <span class="s2">&quot;_check_forbidden_character&quot;</span>
            <span class="n">fk_id_function</span> <span class="o">=</span> <span class="n">management</span><span class="o">.</span><span class="n">_query_func_id</span><span class="p">(</span><span class="n">func_name</span><span class="p">)</span>
            <span class="n">messages</span> <span class="o">=</span> <span class="n">management</span><span class="o">.</span><span class="n">_get_messages</span><span class="p">(</span><span class="n">fk_id_function</span><span class="p">,</span> <span class="n">language</span><span class="p">,</span> <span class="n">func_name</span><span class="p">)</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="n">messages</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">])</span>
            <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
                <span class="n">list_of_charcater</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">list_of_forbbiden</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>
                <span class="n">all_formated_characters</span> <span class="o">=</span> <span class="p">[</span><span class="sa">f</span><span class="s2">&quot;    ---&gt;    &#39;  </span><span class="si">{</span><span class="n">charcater</span><span class="si">}</span><span class="s2">  &#39;&quot;</span> <span class="k">for</span> <span class="n">charcater</span> <span class="ow">in</span> <span class="n">list_of_charcater</span><span class="p">]</span>
                <span class="n">msg</span> <span class="o">=</span> <span class="p">[</span>
                    <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">messages</span><span class="p">[</span><span class="mi">2</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span><span class="si">}</span><span class="s2"> &#39;</span><span class="si">{</span><span class="n">key</span><span class="si">}</span><span class="s2">&#39; (</span><span class="si">{</span><span class="n">list_of_forbbiden</span><span class="p">[</span><span class="n">key</span><span class="p">]</span><span class="si">}</span><span class="s2">) </span><span class="si">{</span><span class="n">messages</span><span class="p">[</span><span class="mi">2</span><span class="p">][</span><span class="mi">2</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>
                    <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">messages</span><span class="p">[</span><span class="mi">3</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>
                    <span class="n">all_formated_characters</span>
                    <span class="p">]</span>
                <span class="n">flat_list</span> <span class="o">=</span> <span class="n">general</span><span class="o">.</span><span class="n">_flatten_list_of_list_string</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
                <span class="n">flat_list</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">flat_list</span><span class="p">)</span>
                <span class="n">general</span><span class="o">.</span><span class="n">_display_n_line_attention</span><span class="p">(</span>
                    <span class="n">flat_list</span>
                <span class="p">)</span>
                <span class="k">raise</span>
    <span class="k">return</span> <span class="kc">True</span>

<span class="c1"># with tests, with text, with database, with docstring</span>
<span class="k">def</span> <span class="nf">_check_plot_design</span><span class="p">(</span><span class="n">plot_design</span><span class="p">,</span> <span class="n">param_name</span><span class="p">,</span> <span class="n">plot_design_default</span><span class="p">,</span> <span class="n">plot_design_example</span><span class="p">,</span> <span class="n">language</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;This function checks if the dictionary passed through the plot_desing parameter is correct.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    plot_design : dict</span>
<span class="sd">        The dictionary to be tested, which is passed by the user</span>
<span class="sd">    param_name : string</span>
<span class="sd">        The name of the parameter being tested</span>
<span class="sd">    plot_design_default : dict</span>
<span class="sd">        A dictionary containing the default values to be compared with the plot_design</span>
<span class="sd">    plot_design_example: dict</span>
<span class="sd">        A dictionary with the same keys as plot_design, but the values are strings that are used as an example.</span>
<span class="sd">    language : string</span>
<span class="sd">        The language code</span>

<span class="sd">    Notes</span>
<span class="sd">    -----</span>
<span class="sd">    The parameter &#39;param_name&#39; isn&#39;t checked if it is a string.</span>
<span class="sd">    The parameter &#39;language&#39; isn&#39;t checked if it is a string.</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    True if &#39;plot_design&#39; seems to be corret</span>
<span class="sd">    ValueError if &#39;plot_design&#39; has something wrong</span>

<span class="sd">    &quot;&quot;&quot;</span>

    <span class="c1"># Verificando se plot_design</span>
    <span class="n">checkers</span><span class="o">.</span><span class="n">_check_is_dict</span><span class="p">(</span><span class="n">plot_design</span><span class="p">,</span> <span class="n">param_name</span><span class="p">,</span> <span class="n">language</span><span class="p">)</span>

    <span class="c1"># lista com as chaves passadas</span>
    <span class="n">data_keys_list</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">plot_design</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>

    <span class="c1"># lista com as chaves necessárias</span>
    <span class="n">keys_list</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">plot_design_default</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>

    <span class="c1"># verificando o dicionário tem as chaves esperadas</span>
    <span class="k">for</span> <span class="n">chave</span> <span class="ow">in</span> <span class="n">keys_list</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">chave</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">data_keys_list</span><span class="p">:</span>
            <span class="c1">### quering ###</span>
            <span class="n">func_name</span> <span class="o">=</span> <span class="s2">&quot;_check_plot_design&quot;</span>
            <span class="n">fk_id_function</span> <span class="o">=</span> <span class="n">management</span><span class="o">.</span><span class="n">_query_func_id</span><span class="p">(</span><span class="n">func_name</span><span class="p">)</span>
            <span class="n">messages</span> <span class="o">=</span> <span class="n">management</span><span class="o">.</span><span class="n">_get_messages</span><span class="p">(</span><span class="n">fk_id_function</span><span class="p">,</span> <span class="n">language</span><span class="p">,</span> <span class="n">func_name</span><span class="p">)</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="n">messages</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">])</span>
            <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
                <span class="n">all_formated_keys</span> <span class="o">=</span> <span class="p">[</span><span class="sa">f</span><span class="s2">&quot;    ---&gt;  &#39;</span><span class="si">{</span><span class="n">key</span><span class="si">}</span><span class="s2">&#39;&quot;</span> <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">keys_list</span><span class="p">]</span>
                <span class="n">msg</span> <span class="o">=</span> <span class="p">[</span>
                    <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">messages</span><span class="p">[</span><span class="mi">2</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span><span class="si">}</span><span class="s2"> &#39;</span><span class="si">{</span><span class="n">chave</span><span class="si">}</span><span class="s2">&#39; </span><span class="si">{</span><span class="n">messages</span><span class="p">[</span><span class="mi">2</span><span class="p">][</span><span class="mi">2</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>
                    <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">messages</span><span class="p">[</span><span class="mi">3</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>
                    <span class="n">all_formated_keys</span>
                <span class="p">]</span>
                <span class="n">msg</span> <span class="o">=</span> <span class="n">general</span><span class="o">.</span><span class="n">_flatten_list_of_list_string</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
                <span class="n">msg</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
                <span class="n">general</span><span class="o">.</span><span class="n">_display_n_line_attention</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
                <span class="k">raise</span>
    <span class="c1"># verificando se o número de chaves passadas é correto</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">plot_design</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span> <span class="o">!=</span> <span class="nb">len</span><span class="p">(</span><span class="n">plot_design_default</span><span class="o">.</span><span class="n">keys</span><span class="p">()):</span>
        <span class="n">func_name</span> <span class="o">=</span> <span class="s2">&quot;_check_plot_design&quot;</span>
        <span class="n">fk_id_function</span> <span class="o">=</span> <span class="n">management</span><span class="o">.</span><span class="n">_query_func_id</span><span class="p">(</span><span class="n">func_name</span><span class="p">)</span>
        <span class="n">messages</span> <span class="o">=</span> <span class="n">management</span><span class="o">.</span><span class="n">_get_messages</span><span class="p">(</span><span class="n">fk_id_function</span><span class="p">,</span> <span class="n">language</span><span class="p">,</span> <span class="n">func_name</span><span class="p">)</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="n">messages</span><span class="p">[</span><span class="mi">4</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">])</span>
        <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
            <span class="n">all_formated_keys</span> <span class="o">=</span> <span class="p">[</span><span class="sa">f</span><span class="s2">&quot;    ---&gt;  &#39;</span><span class="si">{</span><span class="n">key</span><span class="si">}</span><span class="s2">&#39;&quot;</span> <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">keys_list</span><span class="p">]</span>
            <span class="n">msg</span> <span class="o">=</span> <span class="p">[</span>
                <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">messages</span><span class="p">[</span><span class="mi">5</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span><span class="si">}</span><span class="s2"> &#39;</span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">plot_design_default</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span><span class="si">}</span><span class="s2">&#39;, </span><span class="si">{</span><span class="n">messages</span><span class="p">[</span><span class="mi">5</span><span class="p">][</span><span class="mi">2</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span><span class="si">}</span><span class="s2"> &#39;</span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">plot_design</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span><span class="si">}</span><span class="s2">&#39;.&quot;</span><span class="p">,</span>
                <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">messages</span><span class="p">[</span><span class="mi">6</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>
                <span class="n">all_formated_keys</span>
            <span class="p">]</span>
            <span class="n">msg</span> <span class="o">=</span> <span class="n">general</span><span class="o">.</span><span class="n">_flatten_list_of_list_string</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
            <span class="n">msg</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
            <span class="n">general</span><span class="o">.</span><span class="n">_display_n_line_attention</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
            <span class="k">raise</span>

    <span class="c1"># verificando os values</span>
    <span class="c1"># conferindo se todos os values são listas</span>
    <span class="k">for</span> <span class="n">chave</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">plot_design</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="n">func_name</span> <span class="o">=</span> <span class="s2">&quot;_check_plot_design&quot;</span>
        <span class="n">fk_id_function</span> <span class="o">=</span> <span class="n">management</span><span class="o">.</span><span class="n">_query_func_id</span><span class="p">(</span><span class="n">func_name</span><span class="p">)</span>
        <span class="n">messages</span> <span class="o">=</span> <span class="n">management</span><span class="o">.</span><span class="n">_get_messages</span><span class="p">(</span><span class="n">fk_id_function</span><span class="p">,</span> <span class="n">language</span><span class="p">,</span> <span class="n">func_name</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="nb">list</span><span class="p">)</span> <span class="o">==</span> <span class="kc">False</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="n">messages</span><span class="p">[</span><span class="mi">7</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">])</span>
            <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
                <span class="n">general</span><span class="o">.</span><span class="n">_display_one_line_attention</span><span class="p">(</span>
                                    <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">messages</span><span class="p">[</span><span class="mi">8</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span><span class="si">}</span><span class="s2"> &#39;</span><span class="si">{</span><span class="n">chave</span><span class="si">}</span><span class="s2">&#39; </span><span class="si">{</span><span class="n">messages</span><span class="p">[</span><span class="mi">8</span><span class="p">][</span><span class="mi">2</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span><span class="si">}</span><span class="s2"> &#39;</span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">value</span><span class="p">)</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="s2">&#39;&quot;</span>
                                    <span class="p">)</span>
                <span class="k">raise</span>
    <span class="c1"># verificando o tamanho da lista para cada dict</span>
    <span class="k">for</span> <span class="n">chave</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">plot_design</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">plot_design</span><span class="p">[</span><span class="n">chave</span><span class="p">])</span> <span class="o">!=</span> <span class="nb">len</span><span class="p">(</span><span class="n">plot_design_default</span><span class="p">[</span><span class="n">chave</span><span class="p">]):</span>
            <span class="n">func_name</span> <span class="o">=</span> <span class="s2">&quot;_check_plot_design&quot;</span>
            <span class="n">fk_id_function</span> <span class="o">=</span> <span class="n">management</span><span class="o">.</span><span class="n">_query_func_id</span><span class="p">(</span><span class="n">func_name</span><span class="p">)</span>
            <span class="n">messages</span> <span class="o">=</span> <span class="n">management</span><span class="o">.</span><span class="n">_get_messages</span><span class="p">(</span><span class="n">fk_id_function</span><span class="p">,</span> <span class="n">language</span><span class="p">,</span> <span class="n">func_name</span><span class="p">)</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="n">messages</span><span class="p">[</span><span class="mi">9</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">])</span>
            <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
                <span class="n">msg</span> <span class="o">=</span> <span class="p">[</span>
                    <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">messages</span><span class="p">[</span><span class="mi">10</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span><span class="si">}</span><span class="s2"> &#39;</span><span class="si">{</span><span class="n">chave</span><span class="si">}</span><span class="s2">&#39; </span><span class="si">{</span><span class="n">messages</span><span class="p">[</span><span class="mi">10</span><span class="p">][</span><span class="mi">2</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">plot_design_default</span><span class="p">[</span><span class="n">chave</span><span class="p">])</span><span class="si">}</span><span class="s2">, </span><span class="si">{</span><span class="n">messages</span><span class="p">[</span><span class="mi">10</span><span class="p">][</span><span class="mi">4</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">plot_design</span><span class="p">[</span><span class="n">chave</span><span class="p">])</span><span class="si">}</span><span class="s2">.&quot;</span><span class="p">,</span>
                    <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">messages</span><span class="p">[</span><span class="mi">11</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>
                    <span class="sa">f</span><span class="s2">&quot;    ---&gt;   </span><span class="si">{</span><span class="n">plot_design_example</span><span class="p">[</span><span class="n">chave</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span>
                    <span class="p">]</span>
                <span class="n">general</span><span class="o">.</span><span class="n">_display_n_line_attention</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
                <span class="k">raise</span>
    <span class="c1"># verificando o tipo de cada elemento dentro das listas</span>
    <span class="k">for</span> <span class="p">(</span><span class="n">chave</span><span class="p">,</span> <span class="n">value</span><span class="p">),</span> <span class="p">(</span><span class="n">chave_def</span><span class="p">,</span> <span class="n">value_def</span><span class="p">)</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">plot_design</span><span class="o">.</span><span class="n">items</span><span class="p">(),</span> <span class="n">plot_design_default</span><span class="o">.</span><span class="n">items</span><span class="p">()):</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">value</span><span class="p">)):</span>
            <span class="n">func_name</span> <span class="o">=</span> <span class="s2">&quot;_check_plot_design&quot;</span>
            <span class="n">fk_id_function</span> <span class="o">=</span> <span class="n">management</span><span class="o">.</span><span class="n">_query_func_id</span><span class="p">(</span><span class="n">func_name</span><span class="p">)</span>
            <span class="n">messages</span> <span class="o">=</span> <span class="n">management</span><span class="o">.</span><span class="n">_get_messages</span><span class="p">(</span><span class="n">fk_id_function</span><span class="p">,</span> <span class="n">language</span><span class="p">,</span> <span class="n">func_name</span><span class="p">)</span>
            <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">value</span><span class="p">[</span><span class="n">i</span><span class="p">])</span> <span class="o">!=</span> <span class="nb">type</span><span class="p">(</span><span class="n">value_def</span><span class="p">[</span><span class="n">i</span><span class="p">]):</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="n">messages</span><span class="p">[</span><span class="mi">12</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">])</span>
                <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
                    <span class="n">msg</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">messages</span><span class="p">[</span><span class="mi">13</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span><span class="si">}</span><span class="s2"> &#39;</span><span class="si">{</span><span class="n">i</span><span class="si">}</span><span class="s2">&#39; </span><span class="si">{</span><span class="n">messages</span><span class="p">[</span><span class="mi">13</span><span class="p">][</span><span class="mi">2</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span><span class="si">}</span><span class="s2"> &#39;</span><span class="si">{</span><span class="n">chave</span><span class="si">}</span><span class="s2">&#39; </span><span class="si">{</span><span class="n">messages</span><span class="p">[</span><span class="mi">13</span><span class="p">][</span><span class="mi">4</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span><span class="si">}</span><span class="s2"> &#39;</span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">value_def</span><span class="p">[</span><span class="n">i</span><span class="p">])</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="s2">&#39;, </span><span class="si">{</span><span class="n">messages</span><span class="p">[</span><span class="mi">13</span><span class="p">][</span><span class="mi">6</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span><span class="si">}</span><span class="s2"> &#39;</span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">value</span><span class="p">[</span><span class="n">i</span><span class="p">])</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="s2">&#39;&quot;</span>
                    <span class="n">general</span><span class="o">.</span><span class="n">_display_one_line_attention</span><span class="p">(</span>
                                        <span class="n">msg</span>
                                        <span class="p">)</span>
                    <span class="k">raise</span>
    <span class="k">return</span> <span class="kc">True</span>

<span class="c1"># with tests, with text, with database,, with docstring</span>
<span class="k">def</span> <span class="nf">_check_which_density_gaussian_kernal_plot</span><span class="p">(</span><span class="n">which</span><span class="p">,</span> <span class="n">language</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;This function checks if the value passed to the &#39;which&#39; parameter used to draw the Gaussian density plot is valid.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    which : string</span>
<span class="sd">        A string containing the keys used to draw the kde graph.</span>
<span class="sd">    language : string</span>
<span class="sd">        The language code</span>

<span class="sd">    Notes</span>
<span class="sd">    -----</span>
<span class="sd">    The parameter &#39;language&#39; isn&#39;t checked if it is a string.</span>

<span class="sd">    Return</span>
<span class="sd">    ------</span>
<span class="sd">    True if which was considered correct</span>
<span class="sd">    Raise ValueError if it was not considered correct</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">accepted_keys</span> <span class="o">=</span> <span class="p">[</span>
            <span class="s2">&quot;    ---&gt;  &#39;mean&#39; adds the mean to the graph&quot;</span><span class="p">,</span>
            <span class="s2">&quot;    ---&gt;  &#39;median&#39; adds the median to the graph&quot;</span><span class="p">,</span>
            <span class="s2">&quot;    ---&gt;  &#39;mode&#39; adds the mode to the graph&quot;</span><span class="p">,</span>
            <span class="s2">&quot;         or&quot;</span><span class="p">,</span>
            <span class="s2">&quot;    ---&gt;  &#39;all&#39; adds the mean, median and mode to the graph&quot;</span><span class="p">,</span>
            <span class="p">]</span>

    <span class="c1"># removando espaços em branco</span>
    <span class="n">which</span> <span class="o">=</span> <span class="n">which</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot; &quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)</span>
    <span class="c1"># verificando se tem apenas caracteres aceitos</span>
    <span class="n">list_accepted_letters</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;a&quot;</span><span class="p">,</span> <span class="s2">&quot;e&quot;</span><span class="p">,</span> <span class="s2">&quot;d&quot;</span><span class="p">,</span> <span class="s2">&quot;i&quot;</span><span class="p">,</span> <span class="s2">&quot;l&quot;</span><span class="p">,</span> <span class="s2">&quot;m&quot;</span><span class="p">,</span> <span class="s2">&quot;n&quot;</span><span class="p">,</span> <span class="s2">&quot;o&quot;</span><span class="p">,</span> <span class="s2">&quot;,&quot;</span><span class="p">]</span>
    <span class="n">list_which</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">which</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">word</span> <span class="ow">in</span> <span class="n">list_which</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">word</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">list_accepted_letters</span><span class="p">:</span>
            <span class="c1">### quering ###</span>
            <span class="n">func_name</span> <span class="o">=</span> <span class="s2">&quot;_check_which_density_gaussian_kernal_plot&quot;</span>
            <span class="n">fk_id_function</span> <span class="o">=</span> <span class="n">management</span><span class="o">.</span><span class="n">_query_func_id</span><span class="p">(</span><span class="n">func_name</span><span class="p">)</span>
            <span class="n">messages</span> <span class="o">=</span> <span class="n">management</span><span class="o">.</span><span class="n">_get_messages</span><span class="p">(</span><span class="n">fk_id_function</span><span class="p">,</span> <span class="n">language</span><span class="p">,</span> <span class="n">func_name</span><span class="p">)</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="n">messages</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">])</span>
            <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>

                <span class="n">msg</span> <span class="o">=</span> <span class="p">[</span>
                        <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">messages</span><span class="p">[</span><span class="mi">2</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span><span class="si">}</span><span class="s2"> &#39;</span><span class="si">{</span><span class="n">word</span><span class="si">}</span><span class="s2">&#39;.&quot;</span><span class="p">,</span>
                        <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">messages</span><span class="p">[</span><span class="mi">3</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>
                        <span class="n">accepted_keys</span><span class="p">,</span>
                        <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">messages</span><span class="p">[</span><span class="mi">4</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span>
                <span class="p">]</span>
                <span class="n">msg</span> <span class="o">=</span> <span class="n">general</span><span class="o">.</span><span class="n">_flatten_list_of_list_string</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
                <span class="n">msg</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
                <span class="n">general</span><span class="o">.</span><span class="n">_display_n_line_attention</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
                <span class="k">raise</span>

    <span class="n">which</span> <span class="o">=</span> <span class="n">which</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;,&quot;</span><span class="p">)</span>
    <span class="n">list_accepted_keys</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;mean&quot;</span><span class="p">,</span> <span class="s2">&quot;median&quot;</span><span class="p">,</span> <span class="s2">&quot;mode&quot;</span><span class="p">,</span> <span class="s2">&quot;all&quot;</span><span class="p">]</span>
    <span class="k">for</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">which</span><span class="p">:</span>
        <span class="n">func_name</span> <span class="o">=</span> <span class="s2">&quot;_check_which_density_gaussian_kernal_plot&quot;</span>
        <span class="n">fk_id_function</span> <span class="o">=</span> <span class="n">management</span><span class="o">.</span><span class="n">_query_func_id</span><span class="p">(</span><span class="n">func_name</span><span class="p">)</span>
        <span class="n">messages</span> <span class="o">=</span> <span class="n">management</span><span class="o">.</span><span class="n">_get_messages</span><span class="p">(</span><span class="n">fk_id_function</span><span class="p">,</span> <span class="n">language</span><span class="p">,</span> <span class="n">func_name</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">value</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">list_accepted_keys</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="n">messages</span><span class="p">[</span><span class="mi">5</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">])</span>
            <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
                <span class="n">msg</span> <span class="o">=</span> <span class="p">[</span>
                        <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">messages</span><span class="p">[</span><span class="mi">6</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span><span class="si">}</span><span class="s2"> &#39;</span><span class="si">{</span><span class="n">value</span><span class="si">}</span><span class="s2">&#39; </span><span class="si">{</span><span class="n">messages</span><span class="p">[</span><span class="mi">6</span><span class="p">][</span><span class="mi">2</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span><span class="si">}</span><span class="s2">.&quot;</span><span class="p">,</span>
                        <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">messages</span><span class="p">[</span><span class="mi">7</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>
                        <span class="p">[</span><span class="sa">f</span><span class="s2">&quot;    ---&gt;  </span><span class="si">{</span><span class="n">chave</span><span class="si">}</span><span class="s2">&quot;</span> <span class="k">for</span> <span class="n">chave</span> <span class="ow">in</span> <span class="n">list_accepted_keys</span><span class="p">],</span>
                <span class="p">]</span>
                <span class="n">msg</span> <span class="o">=</span> <span class="n">general</span><span class="o">.</span><span class="n">_flatten_list_of_list_string</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
                <span class="n">msg</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
                <span class="n">general</span><span class="o">.</span><span class="n">_display_n_line_attention</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
                <span class="k">raise</span>
    <span class="k">if</span> <span class="s2">&quot;all&quot;</span> <span class="ow">in</span> <span class="n">which</span><span class="p">:</span>
        <span class="n">func_name</span> <span class="o">=</span> <span class="s2">&quot;_check_which_density_gaussian_kernal_plot&quot;</span>
        <span class="n">fk_id_function</span> <span class="o">=</span> <span class="n">management</span><span class="o">.</span><span class="n">_query_func_id</span><span class="p">(</span><span class="n">func_name</span><span class="p">)</span>
        <span class="n">messages</span> <span class="o">=</span> <span class="n">management</span><span class="o">.</span><span class="n">_get_messages</span><span class="p">(</span><span class="n">fk_id_function</span><span class="p">,</span> <span class="n">language</span><span class="p">,</span> <span class="n">func_name</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">which</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">1</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="n">messages</span><span class="p">[</span><span class="mi">8</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">])</span>
            <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
                <span class="n">msg</span> <span class="o">=</span> <span class="p">[</span>
                        <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">messages</span><span class="p">[</span><span class="mi">9</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>
                        <span class="p">[</span><span class="sa">f</span><span class="s2">&quot;    ---&gt;  </span><span class="si">{</span><span class="n">chave</span><span class="si">}</span><span class="s2">&quot;</span> <span class="k">for</span> <span class="n">chave</span> <span class="ow">in</span> <span class="n">which</span><span class="p">],</span>
                <span class="p">]</span>
                <span class="n">msg</span> <span class="o">=</span> <span class="n">general</span><span class="o">.</span><span class="n">_flatten_list_of_list_string</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
                <span class="n">msg</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
                <span class="n">general</span><span class="o">.</span><span class="n">_display_n_line_attention</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
                <span class="k">raise</span>

    <span class="k">return</span> <span class="n">which</span>

<span class="c1"># with SOME test, with text, with database</span>
<span class="k">def</span> <span class="nf">_export_to_csv</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">language</span><span class="p">,</span> <span class="n">file_name</span><span class="o">=</span><span class="s2">&quot;my_data&quot;</span><span class="p">,</span> <span class="n">sep</span><span class="o">=</span><span class="s1">&#39;,&#39;</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Export the data to csv file</span>
<span class="sd">    This function is just a wraper around DataFrame.to_csv to export csv files.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    df : pandas.DataFrame</span>
<span class="sd">        The DataFrame with the data to be exported</span>
<span class="sd">    language : string</span>
<span class="sd">        The language code</span>
<span class="sd">    file_name : string</span>
<span class="sd">        The name of the file to be exported, without its extension (default = &#39;my_data&#39;)</span>
<span class="sd">    sep : string of length 1</span>
<span class="sd">        Field delimiter for the output file (default = &#39;;&#39;). The same parameter of the DataFrame.to_csv pandas method [1]_</span>


<span class="sd">    Notes</span>
<span class="sd">    -----</span>
<span class="sd">    The parameter &#39;language&#39; isn&#39;t checked if it is a string.</span>

<span class="sd">    References</span>
<span class="sd">    ----------</span>
<span class="sd">    .. [1] https://pandas.pydata.org/docs/reference/api/pandas.DataFrame.to_csv.html</span>

<span class="sd">    &quot;&quot;&quot;</span>

    <span class="c1"># cheking if the filename is correct</span>
    <span class="n">_check_file_name_is_str</span><span class="p">(</span><span class="n">file_name</span><span class="p">,</span> <span class="n">language</span><span class="p">)</span>
    <span class="c1"># checking if a problematic character is present in the filename</span>
    <span class="n">_check_forbidden_character</span><span class="p">(</span><span class="n">file_name</span><span class="p">,</span> <span class="s2">&quot;file_name&quot;</span><span class="p">,</span> <span class="n">language</span><span class="p">)</span>
    <span class="c1"># adding the &#39;.csv&#39; extension</span>
    <span class="n">file</span> <span class="o">=</span> <span class="n">file_name</span> <span class="o">+</span> <span class="s1">&#39;.csv&#39;</span>
    <span class="c1"># cheking if the sep is valid</span>
    <span class="n">_sep_checker</span><span class="p">(</span><span class="n">sep</span><span class="p">,</span> <span class="n">language</span><span class="p">)</span>
    <span class="c1"># cheking if the df is a DataFrame</span>
    <span class="n">checkers</span><span class="o">.</span><span class="n">_check_is_data_frame</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">file_name</span><span class="p">,</span> <span class="n">language</span><span class="p">)</span>
    <span class="c1"># cheking if the file already exists. If it does, ask the user if wants to replace the file</span>
    <span class="n">file_exists</span> <span class="o">=</span> <span class="n">_check_file_exists</span><span class="p">(</span><span class="n">file</span><span class="p">)</span>

    <span class="c1">### querring ###</span>
    <span class="n">func_name</span> <span class="o">=</span> <span class="s2">&quot;_export_to_csv&quot;</span>
    <span class="n">fk_id_function</span> <span class="o">=</span> <span class="n">management</span><span class="o">.</span><span class="n">_query_func_id</span><span class="p">(</span><span class="n">func_name</span><span class="p">)</span>
    <span class="n">messages</span> <span class="o">=</span> <span class="n">management</span><span class="o">.</span><span class="n">_get_messages</span><span class="p">(</span><span class="n">fk_id_function</span><span class="p">,</span> <span class="n">language</span><span class="p">,</span> <span class="n">func_name</span><span class="p">)</span>

    <span class="c1"># if the file already exists, create a new name for the file</span>
    <span class="k">if</span> <span class="n">file_exists</span><span class="p">:</span>
        <span class="c1"># warn that the file already exists</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">messages</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span><span class="si">}</span><span class="s2"> &#39;</span><span class="si">{</span><span class="n">file</span><span class="si">}</span><span class="s2">&#39; </span><span class="si">{</span><span class="n">messages</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">2</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="c1"># try to create a new nine by adding a number to the end of the name.</span>
        <span class="k">while</span> <span class="n">file_exists</span><span class="p">:</span>
            <span class="n">i</span> <span class="o">+=</span> <span class="mi">1</span>
            <span class="n">file</span> <span class="o">=</span> <span class="n">file_name</span> <span class="o">+</span> <span class="s2">&quot;_&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">i</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;.csv&quot;</span>
            <span class="n">file_exists</span> <span class="o">=</span> <span class="n">_check_file_exists</span><span class="p">(</span><span class="n">file</span><span class="p">)</span>
        <span class="n">file_name</span> <span class="o">=</span> <span class="n">file</span>
        <span class="c1"># warn the user the name of the file to be exported</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;     ---&gt; </span><span class="si">{</span><span class="n">messages</span><span class="p">[</span><span class="mi">2</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span><span class="si">}</span><span class="s2"> &#39;</span><span class="si">{</span><span class="n">file_name</span><span class="si">}</span><span class="s2">&#39;&quot;</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">file_name</span> <span class="o">=</span> <span class="n">file_name</span> <span class="o">+</span> <span class="s1">&#39;.csv&#39;</span>

    <span class="k">try</span><span class="p">:</span>
        <span class="n">df</span><span class="o">.</span><span class="n">to_csv</span><span class="p">(</span><span class="n">file_name</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s1">&#39;utf-8-sig&#39;</span><span class="p">,</span> <span class="n">index</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">sep</span><span class="o">=</span><span class="n">sep</span><span class="p">)</span>
        <span class="n">general</span><span class="o">.</span><span class="n">_display_one_line_attention</span><span class="p">(</span>
            <span class="n">text</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">messages</span><span class="p">[</span><span class="mi">3</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span><span class="si">}</span><span class="s2"> &#39;</span><span class="si">{</span><span class="n">file_name</span><span class="si">}</span><span class="s2">&#39; </span><span class="si">{</span><span class="n">messages</span><span class="p">[</span><span class="mi">3</span><span class="p">][</span><span class="mi">2</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="p">)</span>
    <span class="k">except</span> <span class="ne">PermissionError</span><span class="p">:</span>
        <span class="c1"># logging.error(traceback.format_exc())</span>
        <span class="n">general</span><span class="o">.</span><span class="n">_display_two_line_attention</span><span class="p">(</span>
            <span class="n">text1</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">messages</span><span class="p">[</span><span class="mi">4</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span><span class="si">}</span><span class="s2"> &#39;</span><span class="si">{</span><span class="n">file_name</span><span class="si">}</span><span class="s2">&#39; </span><span class="si">{</span><span class="n">messages</span><span class="p">[</span><span class="mi">4</span><span class="p">][</span><span class="mi">2</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span><span class="si">}</span><span class="s2">.&quot;</span><span class="p">,</span>
            <span class="n">text2</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">messages</span><span class="p">[</span><span class="mi">5</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span><span class="si">}</span><span class="s2"> &#39;</span><span class="si">{</span><span class="n">file_name</span><span class="si">}</span><span class="s2">&#39; </span><span class="si">{</span><span class="n">messages</span><span class="p">[</span><span class="mi">5</span><span class="p">][</span><span class="mi">2</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="p">)</span>
        <span class="k">raise</span>
    <span class="k">except</span> <span class="ne">FileNotFoundError</span><span class="p">:</span> <span class="c1"># acredito que o problema com subfolder é resolvido com a proibição do /</span>
        <span class="c1"># logging.error(traceback.format_exc())</span>
        <span class="n">general</span><span class="o">.</span><span class="n">_display_two_line_attention</span><span class="p">(</span>
            <span class="n">text1</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">messages</span><span class="p">[</span><span class="mi">4</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span><span class="si">}</span><span class="s2"> &#39;</span><span class="si">{</span><span class="n">file_name</span><span class="si">}</span><span class="s2">&#39; </span><span class="si">{</span><span class="n">messages</span><span class="p">[</span><span class="mi">4</span><span class="p">][</span><span class="mi">2</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span><span class="si">}</span><span class="s2">.&quot;</span><span class="p">,</span>
            <span class="n">text2</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">messages</span><span class="p">[</span><span class="mi">6</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="p">)</span>
        <span class="k">raise</span>
    <span class="k">return</span> <span class="kc">True</span>

<span class="c1"># with SOME test, with text, with database, with docstring</span>
<span class="k">def</span> <span class="nf">_export_to_xlsx</span><span class="p">(</span><span class="n">df_list</span><span class="p">,</span> <span class="n">language</span><span class="p">,</span> <span class="n">file_name</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">sheet_names</span><span class="o">=</span><span class="p">[</span><span class="kc">None</span><span class="p">,</span><span class="kc">None</span><span class="p">]):</span>
    <span class="sd">&quot;&quot;&quot;Export the data to .xlsx file</span>
<span class="sd">    This function is just a wraper around DataFrame.to_excel [1]_ to export excel files.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    df_list : list with pandas.DataFrame</span>
<span class="sd">        A list where each element is a DataFrame that will be inserted in a different sheet. The order of DataFrames in this list must match the list of names passed through the sheet_names parameter.</span>
<span class="sd">    language : string</span>
<span class="sd">        The language code</span>
<span class="sd">    file_name : string</span>
<span class="sd">        The name of the file to be exported, without its extension (default = &#39;my_data&#39;)</span>
<span class="sd">    sheetet_names : list (default [None, None])</span>
<span class="sd">        A list where each element is a string that will be used for each sheet. The order of strings in this list must match the list of DataFrames passed through the df_list parameter.</span>


<span class="sd">    Notes</span>
<span class="sd">    -----</span>
<span class="sd">    The parameter &#39;language&#39; isn&#39;t checked if it is a string.</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    True if the file is exported</span>
<span class="sd">    ValueError if it was not possible to export the file</span>

<span class="sd">    References</span>
<span class="sd">    ----------</span>
<span class="sd">    .. [1] https://pandas.pydata.org/docs/reference/api/pandas.DataFrame.to_excel.html</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">checkers</span><span class="o">.</span><span class="n">_check_is_list</span><span class="p">(</span><span class="n">df_list</span><span class="p">,</span> <span class="s2">&quot;df_list&quot;</span><span class="p">,</span> <span class="n">language</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">df</span> <span class="ow">in</span> <span class="n">df_list</span><span class="p">:</span>
        <span class="n">checkers</span><span class="o">.</span><span class="n">_check_is_data_frame</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="s2">&quot;df&quot;</span><span class="p">,</span> <span class="n">language</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">file_name</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">file_name</span> <span class="o">=</span> <span class="s2">&quot;sample&quot;</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">checkers</span><span class="o">.</span><span class="n">_check_is_str</span><span class="p">(</span><span class="n">file_name</span><span class="p">,</span> <span class="s2">&quot;file_name&quot;</span><span class="p">,</span> <span class="n">language</span><span class="p">)</span>
        <span class="n">_check_forbidden_character</span><span class="p">(</span><span class="n">file_name</span><span class="p">,</span> <span class="s2">&quot;file_name&quot;</span><span class="p">,</span> <span class="n">language</span><span class="p">)</span>

    <span class="n">checkers</span><span class="o">.</span><span class="n">_check_is_list</span><span class="p">(</span><span class="n">sheet_names</span><span class="p">,</span> <span class="s2">&quot;sheet_names&quot;</span><span class="p">,</span> <span class="n">language</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">name</span> <span class="ow">in</span> <span class="n">sheet_names</span><span class="p">:</span>
        <span class="n">checkers</span><span class="o">.</span><span class="n">_check_is_str</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="s2">&quot;sheet_names&quot;</span><span class="p">,</span> <span class="n">language</span><span class="p">)</span>

    <span class="c1">### querring ###</span>
    <span class="n">func_name</span> <span class="o">=</span> <span class="s2">&quot;_export_to_excel&quot;</span>
    <span class="n">fk_id_function</span> <span class="o">=</span> <span class="n">management</span><span class="o">.</span><span class="n">_query_func_id</span><span class="p">(</span><span class="n">func_name</span><span class="p">)</span>
    <span class="n">messages</span> <span class="o">=</span> <span class="n">management</span><span class="o">.</span><span class="n">_get_messages</span><span class="p">(</span><span class="n">fk_id_function</span><span class="p">,</span> <span class="n">language</span><span class="p">,</span> <span class="n">func_name</span><span class="p">)</span>

    <span class="c1"># combando nome corretamente</span>
    <span class="n">file_name</span> <span class="o">=</span> <span class="n">file_name</span> <span class="o">+</span> <span class="s2">&quot;.xlsx&quot;</span>

    <span class="c1"># verificando se os dataframes são validos</span>
    <span class="k">for</span> <span class="n">df</span> <span class="ow">in</span> <span class="n">df_list</span><span class="p">:</span>
        <span class="n">checkers</span><span class="o">.</span><span class="n">_check_is_data_frame</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="s2">&quot;df_list&quot;</span><span class="p">,</span> <span class="n">language</span><span class="p">)</span>

    <span class="c1">### verificando se o arquivo .xlsx já existe</span>
    <span class="k">if</span> <span class="n">_check_file_exists</span><span class="p">(</span><span class="n">file_name</span><span class="p">):</span>
        <span class="c1">## caso exista, obter uma lista com o nome das abas do arquivo</span>
        <span class="c1"># obter os sheet names</span>
        <span class="n">arquivo</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">ExcelFile</span><span class="p">(</span><span class="n">file_name</span><span class="p">,</span> <span class="n">engine</span><span class="o">=</span><span class="s2">&quot;openpyxl&quot;</span><span class="p">)</span>
        <span class="c1"># iterar esta lista comparando se os sheet_names já existem nela</span>
        <span class="n">sheet_alredy_exists</span> <span class="o">=</span> <span class="p">[]</span> <span class="c1"># lista vazia para acumular nomes repetidos</span>
        <span class="k">for</span> <span class="n">sheet</span> <span class="ow">in</span> <span class="n">arquivo</span><span class="o">.</span><span class="n">sheet_names</span><span class="p">:</span> <span class="c1"># olhando nome por nome dentro de sheet_names</span>
            <span class="k">if</span> <span class="n">sheet</span> <span class="ow">in</span> <span class="n">sheet_names</span><span class="p">:</span>
                <span class="n">sheet_alredy_exists</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">sheet</span><span class="p">)</span> <span class="c1"># apendadndo</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">pass</span>
        <span class="c1"># caso pelo menos 1 aba já exista, avisar que o nome escolhido será alterado</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">sheet_alredy_exists</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">lista_sheet_names</span> <span class="o">=</span> <span class="p">[</span><span class="sa">f</span><span class="s2">&quot;    ---&gt;    &#39;</span><span class="si">{</span><span class="n">sheet</span><span class="si">}</span><span class="s2">&#39;&quot;</span> <span class="k">for</span> <span class="n">sheet</span> <span class="ow">in</span> <span class="n">arquivo</span><span class="o">.</span><span class="n">sheet_names</span><span class="p">]</span>
            <span class="n">sheet_alredy_exists</span> <span class="o">=</span> <span class="p">[</span><span class="sa">f</span><span class="s2">&quot;    ---&gt;    &#39;</span><span class="si">{</span><span class="n">sheet</span><span class="si">}</span><span class="s2">&#39;&quot;</span> <span class="k">for</span> <span class="n">sheet</span> <span class="ow">in</span> <span class="n">sheet_alredy_exists</span><span class="p">]</span>
            <span class="n">msg</span> <span class="o">=</span> <span class="p">[</span>
                <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">messages</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span><span class="si">}</span><span class="s2"> &#39;</span><span class="si">{</span><span class="n">file_name</span><span class="si">}</span><span class="s2">&#39; </span><span class="si">{</span><span class="n">messages</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">2</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>
                <span class="n">lista_sheet_names</span><span class="p">,</span>
                <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">messages</span><span class="p">[</span><span class="mi">2</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>
                <span class="n">sheet_alredy_exists</span><span class="p">,</span>
                <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">,</span>
                <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">messages</span><span class="p">[</span><span class="mi">3</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>
                <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">messages</span><span class="p">[</span><span class="mi">4</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>
            <span class="p">]</span>
            <span class="n">msg</span> <span class="o">=</span> <span class="n">general</span><span class="o">.</span><span class="n">_flatten_list_of_list_string</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
            <span class="n">msg</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
            <span class="n">general</span><span class="o">.</span><span class="n">_display_n_line_attention</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">pass</span> <span class="c1"># é pass pois caso o sheet name já exista, é apenas para avisar que o nome será alterado. É apenas um aviso</span>
        <span class="c1"># caso não tenha nenhum nome conflitante, inserir novas abas no arquivo fornecido</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">with</span> <span class="n">pd</span><span class="o">.</span><span class="n">ExcelWriter</span><span class="p">(</span><span class="n">file_name</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s2">&quot;a&quot;</span><span class="p">,</span> <span class="n">if_sheet_exists</span><span class="o">=</span><span class="s2">&quot;new&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">writer</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">df_list</span><span class="p">)):</span>
                    <span class="n">df_list</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">to_excel</span><span class="p">(</span><span class="n">writer</span><span class="p">,</span> <span class="n">sheet_name</span><span class="o">=</span><span class="n">sheet_names</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">index</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">engine</span><span class="o">=</span><span class="s2">&quot;openpyxl&quot;</span><span class="p">)</span>
            <span class="n">general</span><span class="o">.</span><span class="n">_display_one_line_attention</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">messages</span><span class="p">[</span><span class="mi">5</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span><span class="si">}</span><span class="s2"> &#39;</span><span class="si">{</span><span class="n">file_name</span><span class="si">}</span><span class="s2">&#39;&quot;</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">PermissionError</span><span class="p">:</span>
            <span class="n">general</span><span class="o">.</span><span class="n">_display_two_line_attention</span><span class="p">(</span>
                <span class="n">text1</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">messages</span><span class="p">[</span><span class="mi">6</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span><span class="si">}</span><span class="s2"> &#39;</span><span class="si">{</span><span class="n">file_name</span><span class="si">}</span><span class="s2">&#39; </span><span class="si">{</span><span class="n">messages</span><span class="p">[</span><span class="mi">6</span><span class="p">][</span><span class="mi">2</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>
                <span class="n">text2</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">messages</span><span class="p">[</span><span class="mi">7</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span><span class="si">}</span><span class="s2"> &#39;</span><span class="si">{</span><span class="n">file_name</span><span class="si">}</span><span class="s2">&#39; </span><span class="si">{</span><span class="n">messages</span><span class="p">[</span><span class="mi">7</span><span class="p">][</span><span class="mi">2</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span>
                <span class="p">)</span>
            <span class="k">raise</span>
        <span class="k">except</span> <span class="ne">FileNotFoundError</span><span class="p">:</span> <span class="c1"># acredito que o problema com subfolder é resolvido com a proibição do /</span>
            <span class="c1"># logging.error(traceback.format_exc())</span>
            <span class="n">general</span><span class="o">.</span><span class="n">_display_two_line_attention</span><span class="p">(</span>
                <span class="n">text1</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">messages</span><span class="p">[</span><span class="mi">6</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span><span class="si">}</span><span class="s2"> &#39;</span><span class="si">{</span><span class="n">file_name</span><span class="si">}</span><span class="s2">&#39; </span><span class="si">{</span><span class="n">messages</span><span class="p">[</span><span class="mi">6</span><span class="p">][</span><span class="mi">2</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>
                <span class="n">text2</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">messages</span><span class="p">[</span><span class="mi">8</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span>
                        <span class="p">)</span>
            <span class="k">raise</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="c1">## caso não exista, criar o arquivo e exportar</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">with</span> <span class="n">pd</span><span class="o">.</span><span class="n">ExcelWriter</span><span class="p">(</span><span class="n">file_name</span><span class="p">)</span> <span class="k">as</span> <span class="n">writer</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">df_list</span><span class="p">)):</span>
                    <span class="n">df_list</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">to_excel</span><span class="p">(</span><span class="n">writer</span><span class="p">,</span> <span class="n">sheet_name</span><span class="o">=</span><span class="n">sheet_names</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">index</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">engine</span><span class="o">=</span><span class="s2">&quot;openpyxl&quot;</span><span class="p">)</span>
            <span class="n">general</span><span class="o">.</span><span class="n">_display_one_line_attention</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">messages</span><span class="p">[</span><span class="mi">5</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">file_name</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">PermissionError</span><span class="p">:</span>
            <span class="n">general</span><span class="o">.</span><span class="n">_display_two_line_attention</span><span class="p">(</span>
                <span class="n">text1</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">messages</span><span class="p">[</span><span class="mi">6</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span><span class="si">}</span><span class="s2"> &#39;</span><span class="si">{</span><span class="n">file_name</span><span class="si">}</span><span class="s2">&#39; </span><span class="si">{</span><span class="n">messages</span><span class="p">[</span><span class="mi">6</span><span class="p">][</span><span class="mi">2</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>
                <span class="n">text2</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">messages</span><span class="p">[</span><span class="mi">7</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span><span class="si">}</span><span class="s2"> &#39;</span><span class="si">{</span><span class="n">file_name</span><span class="si">}</span><span class="s2">&#39; </span><span class="si">{</span><span class="n">messages</span><span class="p">[</span><span class="mi">7</span><span class="p">][</span><span class="mi">2</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span>
                <span class="p">)</span>
            <span class="k">raise</span>
        <span class="k">except</span> <span class="ne">FileNotFoundError</span><span class="p">:</span> <span class="c1"># acredito que o problema com subfolder é resolvido com a proibição do /</span>
            <span class="c1"># logging.error(traceback.format_exc())</span>
            <span class="n">general</span><span class="o">.</span><span class="n">_display_two_line_attention</span><span class="p">(</span>
                <span class="n">text1</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">messages</span><span class="p">[</span><span class="mi">6</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span><span class="si">}</span><span class="s2"> &#39;</span><span class="si">{</span><span class="n">file_name</span><span class="si">}</span><span class="s2">&#39; </span><span class="si">{</span><span class="n">messages</span><span class="p">[</span><span class="mi">6</span><span class="p">][</span><span class="mi">2</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>
                <span class="n">text2</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">messages</span><span class="p">[</span><span class="mi">8</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span>
                        <span class="p">)</span>
            <span class="k">raise</span>
    <span class="k">return</span> <span class="kc">True</span>

<span class="c1"># with some test, with text, with database</span>
<span class="k">def</span> <span class="nf">_flat_list_of_lists</span><span class="p">(</span><span class="n">my_list</span><span class="p">,</span> <span class="n">param_name</span><span class="p">,</span> <span class="n">language</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;This function flats a list of lists</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    my_list : list of lists</span>
<span class="sd">        The list with lists to be flattened. All inner elements must be a list</span>

<span class="sd">    param_name : string</span>
<span class="sd">        The original name of the parameter passed through the parameter &#39;my_list&#39;.</span>

<span class="sd">    Notes</span>
<span class="sd">    -----</span>
<span class="sd">    The parameter &#39;param_name&#39; isn&#39;t checked if it is a string.</span>
<span class="sd">    The parameter &#39;my_list&#39; isn&#39;t checked if it is a list.</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    A flattened list</span>
<span class="sd">    ValueError if &#39;my_list&#39; does not contain lists in all its elements.</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">checkers</span><span class="o">.</span><span class="n">_check_is_list</span><span class="p">(</span><span class="n">my_list</span><span class="p">,</span> <span class="n">param_name</span><span class="p">,</span> <span class="n">language</span><span class="p">)</span>
    <span class="c1">### quering ###</span>
    <span class="n">func_name</span> <span class="o">=</span> <span class="s2">&quot;_flat_list_of_lists&quot;</span>
    <span class="n">fk_id_function</span> <span class="o">=</span> <span class="n">management</span><span class="o">.</span><span class="n">_query_func_id</span><span class="p">(</span><span class="n">func_name</span><span class="p">)</span>
    <span class="n">messages</span> <span class="o">=</span> <span class="n">management</span><span class="o">.</span><span class="n">_get_messages</span><span class="p">(</span><span class="n">fk_id_function</span><span class="p">,</span> <span class="n">language</span><span class="p">,</span> <span class="n">func_name</span><span class="p">)</span>
    <span class="k">if</span> <span class="nb">all</span><span class="p">(</span><span class="nb">isinstance</span><span class="p">(</span><span class="n">element</span><span class="p">,</span> <span class="nb">list</span><span class="p">)</span> <span class="k">for</span> <span class="n">element</span> <span class="ow">in</span> <span class="n">my_list</span><span class="p">)</span> <span class="o">==</span> <span class="kc">False</span><span class="p">:</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="n">messages</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">])</span>
        <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
            <span class="c1"># &quot;query&quot;</span>
            <span class="n">general</span><span class="o">.</span><span class="n">_display_one_line_attention</span><span class="p">(</span>
                                <span class="n">text</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">messages</span><span class="p">[</span><span class="mi">2</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">param_name</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">messages</span><span class="p">[</span><span class="mi">2</span><span class="p">][</span><span class="mi">2</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span>
                                <span class="p">)</span>
            <span class="k">raise</span>
    <span class="k">return</span> <span class="p">[</span><span class="n">item</span> <span class="k">for</span> <span class="n">sublist</span> <span class="ow">in</span> <span class="n">my_list</span> <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">sublist</span><span class="p">]</span>

<span class="c1"># with tests, with text, with database, with docstring</span>
<span class="k">def</span> <span class="nf">_sep_checker</span><span class="p">(</span><span class="n">sep</span><span class="p">,</span> <span class="n">language</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;This function checks if a value could be used as &#39;sep&#39; parameter for pandas to_csv function</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    sep : string</span>
<span class="sd">        The sep value</span>
<span class="sd">    language : string</span>
<span class="sd">        The language code</span>

<span class="sd">    Notes</span>
<span class="sd">    -----</span>
<span class="sd">    The parameter &#39;language&#39; isn&#39;t checked if it is a string.</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    True if sep is valid.</span>
<span class="sd">    Raises ValueError is sep is not suitable to be used in pd.to_csv.</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">checkers</span><span class="o">.</span><span class="n">_check_is_str</span><span class="p">(</span><span class="n">sep</span><span class="p">,</span> <span class="s2">&quot;sep&quot;</span><span class="p">,</span> <span class="n">language</span><span class="p">)</span>
    <span class="c1">### quering ###</span>
    <span class="n">func_name</span> <span class="o">=</span> <span class="s2">&quot;_sep_checker&quot;</span>
    <span class="n">fk_id_function</span> <span class="o">=</span> <span class="n">management</span><span class="o">.</span><span class="n">_query_func_id</span><span class="p">(</span><span class="n">func_name</span><span class="p">)</span>
    <span class="n">messages</span> <span class="o">=</span> <span class="n">management</span><span class="o">.</span><span class="n">_get_messages</span><span class="p">(</span><span class="n">fk_id_function</span><span class="p">,</span> <span class="n">language</span><span class="p">,</span> <span class="n">func_name</span><span class="p">)</span>

    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">sep</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">1</span><span class="p">:</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="n">messages</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">])</span> <span class="c1">#message</span>
        <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
            <span class="n">general</span><span class="o">.</span><span class="n">_display_two_line_attention</span><span class="p">(</span>
                                <span class="n">text1</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">messages</span><span class="p">[</span><span class="mi">2</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span><span class="si">}</span><span class="s2"> &#39;sep&#39; </span><span class="si">{</span><span class="n">messages</span><span class="p">[</span><span class="mi">2</span><span class="p">][</span><span class="mi">2</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span><span class="si">}</span><span class="s2"> &#39;</span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">sep</span><span class="p">)</span><span class="si">}</span><span class="s2">&#39; &lt;--- (</span><span class="si">{</span><span class="n">sep</span><span class="si">}</span><span class="s2">)&quot;</span><span class="p">,</span>
                                <span class="n">text2</span> <span class="o">=</span> <span class="sa">f</span><span class="s1">&#39;    </span><span class="si">{</span><span class="n">messages</span><span class="p">[</span><span class="mi">3</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span><span class="si">}</span><span class="s1">: ---&gt; &quot;;&quot; &#39;</span>
                                <span class="p">)</span>
            <span class="k">raise</span>
    <span class="k">return</span> <span class="kc">True</span>

<span class="c1"># with tests, without database, with docstring</span>
<span class="k">def</span> <span class="nf">_truncate</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">language</span><span class="p">,</span> <span class="n">decs</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;This function truncates a &#39;value&#39; with &#39;decs&#39; decimal places.</span>

<span class="sd">    This function is a wrapper around numpy.trunc() [1]_ adapted with a clever solution for the truncation of decimal places [2]_.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    value : int or float</span>
<span class="sd">        The value to be truncated</span>
<span class="sd">    decs : int or None (default = None)</span>
<span class="sd">        The number of decimal places the value should be truncated</span>
<span class="sd">    language : string</span>
<span class="sd">        The language code</span>

<span class="sd">    Notes</span>
<span class="sd">    -----</span>
<span class="sd">    The parameter &#39;language&#39; isn&#39;t checked if it is a string.</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    value</span>
<span class="sd">        if value or decs is None, just return the input value</span>
<span class="sd">        elif value is integer, just return the input value</span>
<span class="sd">        else return the value truncated</span>

<span class="sd">    References</span>
<span class="sd">    ----------</span>
<span class="sd">    .. [1] https://numpy.org/doc/stable/reference/generated/numpy.trunc.html</span>
<span class="sd">    .. [2] The inspiration came from: https://stackoverflow.com/a/46020635/17872198</span>

<span class="sd">    Examples</span>
<span class="sd">    --------</span>

<span class="sd">    &gt;&gt;&gt; from easy_stat.utils.helpers import _truncate</span>
<span class="sd">    &gt;&gt;&gt; print(_truncate(0.111, &#39;en&#39;, decs=0))</span>
<span class="sd">    0.0</span>

<span class="sd">    &gt;&gt;&gt; print(_truncate(0.111, &#39;en&#39;, decs=1))</span>
<span class="sd">    0.1</span>

<span class="sd">    &gt;&gt;&gt; print(_truncate(0.111, &#39;en&#39;, decs=2))</span>
<span class="sd">    0.11</span>

<span class="sd">    &gt;&gt;&gt; print(_truncate(0.111, &#39;en&#39;, decs=10))</span>
<span class="sd">    0.111</span>

<span class="sd">    &gt;&gt;&gt; print(_truncate(0.111, &#39;en&#39;, decs=None))</span>
<span class="sd">    0.111</span>

<span class="sd">    &gt;&gt;&gt; print(_truncate(10, &#39;en&#39;, decs=2))</span>
<span class="sd">    10</span>

<span class="sd">    &gt;&gt;&gt; print(_truncate(10, &#39;en&#39;, decs=None))</span>
<span class="sd">    10</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">decs</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">or</span> <span class="n">value</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">value</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">checkers</span><span class="o">.</span><span class="n">_check_is_integer</span><span class="p">(</span><span class="n">decs</span><span class="p">,</span> <span class="s2">&quot;decs&quot;</span><span class="p">,</span> <span class="n">language</span><span class="p">)</span>
    <span class="n">checkers</span><span class="o">.</span><span class="n">_check_is_float_or_int</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="s2">&quot;value&quot;</span><span class="p">,</span> <span class="n">language</span><span class="p">)</span>

    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="p">(</span><span class="nb">int</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">uint</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">integer</span><span class="p">)):</span>
        <span class="k">return</span> <span class="n">value</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">trunc</span><span class="p">(</span><span class="n">value</span><span class="o">*</span><span class="mi">10</span><span class="o">**</span><span class="n">decs</span><span class="p">)</span><span class="o">/</span><span class="p">(</span><span class="mi">10</span><span class="o">**</span><span class="n">decs</span><span class="p">)</span>



























<span class="c1"># Death, death, death, death, death, death, death, death, death, Death, death, death https://youtu.be/jRc9dbgiBPI?t=334</span>
</pre></div>

              </div>
              
              
              <!-- Previous / next buttons -->
<div class='prev-next-area'>
</div>
              
          </main>
          

      </div>
    </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../../../_static/scripts/pydata-sphinx-theme.js?digest=1999514e3f237ded88cf"></script>
<footer class="footer mt-5 mt-md-0">
  <div class="container">
    
    <div class="footer-item">
      <p class="copyright">
    &copy; Copyright 2022, Anderson Canteli.<br>
</p>
    </div>
    
    <div class="footer-item">
      <p class="sphinx-version">
Created using <a href="http://sphinx-doc.org/">Sphinx</a> 4.5.0.<br>
</p>
    </div>
    
  </div>
</footer>
  </body>
</html>